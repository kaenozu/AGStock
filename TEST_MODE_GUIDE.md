# 少額テストモード - 安全な本番前テスト

## 🎯 目的

本番運用前に**10万円の少額**で1ヶ月間テストし、システムの挙動を確認します。

---

## 🛡️ 安全設定

### 厳格なリスク制限

| 項目 | 設定値 | 説明 |
|------|--------|------|
| **初期資本** | ¥100,000 | 少額でテスト |
| **1銘柄上限** | 5% | 最大¥5,000 |
| **日次取引数** | 2回 | 過剰取引防止 |
| **日次損失上限** | -2% | -¥2,000でストップ |
| **総投資比率** | 60% | 最大¥60,000投資 |
| **現金準備** | 40% | 最低¥40,000保持 |
| **緊急停止** | -5% | -¥5,000で全停止 |

---

## 🚀 使い方

### Step 1: テスト設定の使用

```bash
# テスト用設定をコピー
cp config_test.json config.json

# または手動で切り替え
python auto_invest.py --config config_test.json
```

### Step 2: 初回実行

```bash
# テストモード確認
python test_risk_limiter.py

# フルオート投資実行
python auto_invest.py
```

### Step 3: 毎日の確認

```bash
# 日次結果確認
python analyze_performance.py

# パフォーマンストラッカー
python performance_tracker.py
```

---

## 📅 テストスケジュール

### 週1: 慎重な開始
- 毎日結果を確認
- 問題があればすぐ停止
- 設定の微調整

### 週2-3: 監視継続
- 週次レポート確認
- 勝率・損益チェック
- 異常動作の有無確認

### 週4: 評価
- 月次パフォーマンス計算
- 継続判断
- 必要に応じて設定変更

---

## ✅ チェックリスト

毎日確認すべき項目：

- [ ] 日次損益が-2%以内か
- [ ] 取引数が2回以内か
- [ ] ポジションサイズが適切か
- [ ] 現金準備が40%以上か
- [ ] エラーログに異常がないか

---

## 🚨 即座に停止すべき状況

以下の場合はすぐに停止：

1. **1日で-¥2,000以上の損失**
2. **合計-¥5,000以上の損失**
3. **異常な取引（意図しない大量売買等）**
4. **エラーが頻発**
5. **システムが不安定**

```bash
# 緊急停止
pkill -f auto_invest
pkill -f fully_automated_trader
```

---

## 📊 1ヶ月後の評価基準

### 合格条件
- ✅ 総損益: -5%以上（-¥5,000まで許容）
- ✅ 勝率: 40%以上
- ✅ システムエラー: 週1回以下
- ✅ 異常動作: なし

### 次のステップ
合格なら **¥30万円** に増額してさらに1ヶ月テスト

### 不合格の場合
- 戦略の見直し
- パラメータ調整
- システム改善
- 再テスト

---

## 💡 重要な注意事項

### ❌ やってはいけないこと
- 設定を勝手に変更
- 損失上限を緩める
- 毎日確認せずに放置
- 問題があっても続行

### ✅ 必ずやること
- 毎日結果を確認
- 週次でレビュー
- 異常があればすぐ停止
- 記録を残す

---

## 📝 記録テンプレート

毎週以下を記録：

```
週次レポート (第X週)
日付: YYYY-MM-DD

資産状況:
- 開始: ¥100,000
- 終了: ¥XXX,XXX
- 変化: +/- ¥X,XXX (X%)

取引:
- 総取引数: X回
- 勝ち: X回
- 負け: X回
- 勝率: X%

問題点:
- なし / あり (詳細: XXXX)

所感:
- XXXX
```

---

## 🎯 テスト成功の定義

1. **安定性**: システムエラーなく稼働
2. **収益性**: 大幅な損失なし（-5%以内）
3. **安全性**: リスク制限が機能
4. **確実性**: 想定通りの動作

---

**慎重にテストして、本番運用の準備を整えましょう！** 🛡️
