============================= test session starts =============================
platform win32 -- Python 3.11.0, pytest-7.4.2, pluggy-1.6.0 -- C:\Users\neoen\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: C:\gemini-desktop\AGStock
configfile: pytest.ini
plugins: anyio-4.9.0, dash-3.1.1, Faker-37.5.3, logfire-4.0.0, asyncio-0.23.7, benchmark-5.1.0, cov-4.1.0, mock-3.14.1, timeout-2.4.0, xdist-3.8.0, requests-mock-1.12.1, respx-0.22.0, typeguard-4.4.4
asyncio: mode=Mode.STRICT
collecting ... collected 650 items

tests/test_advanced_features.py::test_add_trend_features PASSED          [  0%]
tests/test_advanced_features.py::test_generate_all_advanced_features PASSED [  0%]
tests/test_advanced_models.py::test_build_gru_model PASSED               [  0%]
tests/test_advanced_models.py::test_build_attention_lstm_model PASSED    [  0%]
tests/test_advanced_orders.py::test_limit_buy_order PASSED               [  0%]
tests/test_advanced_orders.py::test_stop_buy_order PASSED                [  0%]
tests/test_advanced_orders.py::test_trailing_stop PASSED                 [  1%]
tests/test_advanced_orders.py::test_ticker_injection PASSED              [  1%]
tests/test_agents.py::TestAgents::test_fundamental_analyst PASSED        [  1%]
tests/test_agents.py::TestAgents::test_macro_strategist PASSED           [  1%]
tests/test_agents.py::TestAgents::test_portfolio_manager_buy_consensus PASSED [  1%]
tests/test_agents.py::TestAgents::test_portfolio_manager_risk_veto PASSED [  1%]
tests/test_agents.py::TestAgents::test_portfolio_manager_sell_consensus PASSED [  2%]
tests/test_agents.py::TestAgents::test_risk_manager PASSED               [  2%]
tests/test_agents.py::TestAgents::test_technical_analyst PASSED          [  2%]
tests/test_async_data_loader.py::TestAsyncDataLoader::test_parse_period PASSED [  2%]
tests/test_async_data_loader.py::TestAsyncDataLoader::test_download_yfinance_valid_ticker PASSED [  2%]
tests/test_async_data_loader.py::TestAsyncDataLoader::test_download_yfinance_invalid_ticker PASSED [  2%]
tests/test_async_data_loader.py::TestAsyncDataLoader::test_fetch_ticker_async PASSED [  2%]
tests/test_async_data_loader.py::TestAsyncDataLoader::test_fetch_multiple_sync_small PASSED [  3%]
tests/test_async_data_loader.py::TestAsyncDataLoader::test_fetch_multiple_sync_empty_list PASSED [  3%]
tests/test_async_data_loader.py::TestAsyncDataLoader::test_fetch_stock_data_async_function PASSED [  3%]
tests/test_async_data_loader.py::TestAsyncPerformance::test_async_vs_sync_performance PASSED [  3%]
tests/test_auth.py::TestAuthManager::test_password_hashing PASSED        [  3%]
tests/test_auth.py::TestAuthManager::test_password_strength_check PASSED [  3%]
tests/test_auth.py::TestAuthManager::test_create_user PASSED             [  4%]
tests/test_auth.py::TestAuthManager::test_weak_password_rejection PASSED [  4%]
tests/test_auth.py::TestAuthManager::test_login_success PASSED           [  4%]
tests/test_auth.py::TestAuthManager::test_login_failure PASSED           [  4%]
tests/test_auth.py::TestAuthManager::test_account_lockout PASSED         [  4%]
tests/test_auth.py::TestAuthManager::test_logout PASSED                  [  4%]
tests/test_auth.py::TestAuthManager::test_session_cleanup PASSED         [  4%]
tests/test_auto_rebalancer_comprehensive.py::test_init PASSED            [  5%]
tests/test_auto_rebalancer_comprehensive.py::test_check_rebalance_needed_no_positions PASSED [  5%]
tests/test_auto_rebalancer_comprehensive.py::test_check_rebalance_needed_high_correlation PASSED [  5%]
tests/test_auto_rebalancer_comprehensive.py::test_suggest_replacement PASSED [  5%]
tests/test_auto_rebalancer_comprehensive.py::test_execute_rebalance_dry_run PASSED [  5%]
tests/test_auto_rebalancer_comprehensive.py::test_execute_rebalance_real PASSED [  5%]
tests/test_auto_trader_assets.py::test_get_target_tickers_with_crypto_fx PASSED [  6%]
tests/test_auto_trader_ui.py::test_render_todays_summary_no_data PASSED  [  6%]
tests/test_auto_trader_ui.py::test_render_todays_summary_with_data PASSED [  6%]
tests/test_auto_trader_ui.py::test_render_todays_summary_missing_timestamp PASSED [  6%]
tests/test_backtester_comprehensive.py::test_init PASSED                 [  6%]
tests/test_backtester_comprehensive.py::test_run_basic_long PASSED       [  6%]
tests/test_backtester_comprehensive.py::test_run_basic_short PASSED      [  6%]
tests/test_backtester_comprehensive.py::test_stop_loss PASSED            [  7%]
tests/test_backtester_comprehensive.py::test_take_profit PASSED          [  7%]
tests/test_backtester_comprehensive.py::test_trailing_stop PASSED        [  7%]
tests/test_backtester_comprehensive.py::test_multi_asset PASSED          [  7%]
tests/test_backtester_comprehensive.py::test_empty_data PASSED           [  7%]
tests/test_backtester_comprehensive.py::test_order_object_market PASSED  [  7%]
tests/test_backtester_comprehensive.py::test_order_object_limit_buy PASSED [  8%]
tests/test_backtester_comprehensive.py::test_position_sizing_dict PASSED [  8%]
tests/test_backtester_risk.py::TestBacktesterRisk::test_position_size PASSED [  8%]
tests/test_backtester_short.py::TestBacktesterShort::test_no_short_selling PASSED [  8%]
tests/test_backtester_short.py::TestBacktesterShort::test_short_selling_profit PASSED [  8%]
tests/test_backup_manager.py::TestBackupManager::test_initialization PASSED [  8%]
tests/test_backup_manager.py::TestBackupManager::test_auto_backup_success PASSED [  8%]
tests/test_backup_manager.py::TestBackupManager::test_auto_backup_creates_valid_db PASSED [  9%]
tests/test_backup_manager.py::TestBackupManager::test_auto_backup_nonexistent_source PASSED [  9%]
tests/test_backup_manager.py::TestBackupManager::test_list_backups PASSED [  9%]
tests/test_backup_manager.py::TestBackupManager::test_cleanup_old_backups PASSED [  9%]
tests/test_backup_manager.py::TestBackupManager::test_restore_backup_success PASSED [  9%]
tests/test_backup_manager.py::TestBackupManager::test_restore_backup_without_confirmation PASSED [  9%]
tests/test_backup_manager.py::TestBackupManager::test_restore_backup_nonexistent_file PASSED [ 10%]
tests/test_backup_manager.py::TestBackupManager::test_get_latest_backup PASSED [ 10%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_init PASSED [ 10%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_benchmarks_defined PASSED [ 10%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_fetch_benchmark_data_with_mock PASSED [ 10%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_calculate_active_return PASSED [ 10%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_calculate_information_ratio PASSED [ 10%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_calculate_information_ratio_zero_tracking_error PASSED [ 11%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_calculate_beta PASSED [ 11%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_calculate_alpha PASSED [ 11%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_calculate_alpha_custom_rf PASSED [ 11%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_generate_comparison_report PASSED [ 11%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_interpret_metrics_positive_alpha PASSED [ 11%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_interpret_metrics_negative_alpha PASSED [ 12%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_interpret_metrics_high_beta PASSED [ 12%]
tests/test_benchmark_comparator_coverage.py::TestBenchmarkComparator::test_interpret_metrics_low_beta PASSED [ 12%]
tests/test_broker.py::test_position_creation PASSED                      [ 12%]
tests/test_broker.py::test_position_to_dict PASSED                       [ 12%]
tests/test_broker.py::test_order_creation PASSED                         [ 12%]
tests/test_broker.py::test_order_with_price PASSED                       [ 12%]
tests/test_broker.py::test_broker_is_abstract PASSED                     [ 13%]
tests/test_broker.py::test_broker_concrete_implementation PASSED         [ 13%]
tests/test_config.py::test_config_singleton PASSED                       [ 13%]
tests/test_config.py::test_config_load_from_yaml PASSED                  [ 13%]
tests/test_config.py::test_config_fallback_defaults PASSED               [ 13%]
tests/test_config.py::test_config_get_nested_value PASSED                [ 13%]
tests/test_config.py::test_config_get_nonexistent_key PASSED             [ 14%]
tests/test_config.py::test_config_get_with_default PASSED                [ 14%]
tests/test_config.py::test_config_env_override_slack PASSED              [ 14%]
tests/test_config.py::test_config_env_override_discord PASSED            [ 14%]
tests/test_config.py::test_config_env_override_pushover PASSED           [ 14%]
tests/test_config.py::test_config_env_override_email PASSED              [ 14%]
tests/test_config.py::test_config_env_email_enabled_false PASSED         [ 14%]
tests/test_config.py::test_global_config_instance PASSED                 [ 15%]
tests/test_config_manager.py::test_config_defaults PASSED                [ 15%]
tests/test_config_manager.py::test_config_debug_parsing PASSED           [ 15%]
tests/test_config_manager.py::test_config_paper_trading_parsing PASSED   [ 15%]
tests/test_config_manager.py::test_config_cache_ttl_parsing PASSED       [ 15%]
tests/test_config_manager.py::test_config_max_workers_parsing PASSED     [ 15%]
tests/test_config_manager.py::test_config_validate_development PASSED    [ 16%]
tests/test_config_manager.py::test_config_validate_production_missing_secret PASSED [ 16%]
tests/test_config_manager.py::test_config_validate_production_missing_jwt PASSED [ 16%]
tests/test_config_manager.py::test_config_validate_production_missing_openai PASSED [ 16%]
tests/test_config_manager.py::test_config_validate_production_all_set PASSED [ 16%]
tests/test_config_manager.py::test_config_to_dict PASSED                 [ 16%]
tests/test_config_manager.py::test_config_to_dict_types PASSED           [ 16%]
tests/test_constants.py::TestNikkei225Tickers::test_tickers_not_empty PASSED [ 17%]
tests/test_constants.py::TestNikkei225Tickers::test_tickers_are_strings PASSED [ 17%]
tests/test_constants.py::TestNikkei225Tickers::test_tickers_have_tokyo_suffix PASSED [ 17%]
tests/test_constants.py::TestNikkei225Tickers::test_tickers_are_unique PASSED [ 17%]
tests/test_constants.py::TestNikkei225Tickers::test_ticker_format PASSED [ 17%]
tests/test_constants.py::TestNikkei225Tickers::test_contains_major_stocks PASSED [ 17%]
tests/test_constants.py::TestTickerNames::test_ticker_names_not_empty PASSED [ 18%]
tests/test_constants.py::TestTickerNames::test_all_keys_are_valid_tickers PASSED [ 18%]
tests/test_constants.py::TestTickerNames::test_all_values_are_strings PASSED [ 18%]
tests/test_constants.py::TestTickerNames::test_all_values_not_empty PASSED [ 18%]
tests/test_constants.py::TestTickerNames::test_all_tickers_have_names PASSED [ 18%]
tests/test_constants.py::TestTickerNames::test_major_company_names PASSED [ 18%]
tests/test_constants.py::TestTickerNames::test_no_duplicate_names PASSED [ 18%]
tests/test_constants.py::TestConstantsConsistency::test_tickers_and_names_same_length PASSED [ 19%]
tests/test_constants.py::TestConstantsConsistency::test_all_tickers_mapped PASSED [ 19%]
tests/test_constants.py::TestConstantsConsistency::test_no_extra_mappings PASSED [ 19%]
tests/test_core_enhancements.py::test_data_manager_save_load PASSED      [ 19%]
tests/test_core_enhancements.py::test_unified_backtester_single_asset PASSED [ 19%]
tests/test_core_enhancements.py::test_unified_backtester_multi_asset PASSED [ 19%]
tests/test_core_enhancements.py::test_portfolio_manager_integration PASSED [ 20%]
tests/test_cost_optimizer.py::TestCostOptimizer::test_initialization PASSED [ 20%]
tests/test_cost_optimizer.py::TestCostOptimizer::test_calculate_fee_sbi PASSED [ 20%]
tests/test_cost_optimizer.py::TestCostOptimizer::test_calculate_fee_rakuten PASSED [ 20%]
tests/test_cost_optimizer.py::TestCostOptimizer::test_calculate_break_even PASSED [ 20%]
tests/test_cost_optimizer.py::TestCostOptimizer::test_optimize_order_size PASSED [ 20%]
tests/test_cost_optimizer.py::TestCostOptimizer::test_compare_brokers PASSED [ 20%]
tests/test_cost_optimizer.py::TestCostOptimizer::test_should_take_profit PASSED [ 21%]
tests/test_cross_validation.py::test_timeseries_cv PASSED                [ 21%]
tests/test_cross_validation.py::test_walk_forward_validation PASSED      [ 21%]
tests/test_dashboard_utils.py::test_check_and_execute_missed_trades_already_checked PASSED [ 21%]
tests/test_dashboard_utils.py::test_check_and_execute_missed_trades_no_history PASSED [ 21%]
tests/test_dashboard_utils.py::test_check_and_execute_missed_trades_executed_today PASSED [ 21%]
tests/test_dashboard_utils.py::test_check_and_execute_missed_trades_missed PASSED [ 22%]
tests/test_dashboard_utils.py::test_check_and_execute_missed_trades_error PASSED [ 22%]
tests/test_dashboard_utils.py::test_check_and_execute_missed_trades_exception PASSED [ 22%]
tests/test_data_manager.py::test_init_creates_database PASSED            [ 22%]
tests/test_data_manager.py::test_save_data PASSED                        [ 22%]
tests/test_data_manager.py::test_save_empty_data PASSED                  [ 22%]
tests/test_data_manager.py::test_save_none_data PASSED                   [ 22%]
tests/test_data_manager.py::test_load_data PASSED                        [ 23%]
tests/test_data_manager.py::test_load_data_with_date_range PASSED        [ 23%]
tests/test_data_manager.py::test_load_nonexistent_ticker PASSED          [ 23%]
tests/test_data_manager.py::test_get_latest_date PASSED                  [ 23%]
tests/test_data_manager.py::test_get_latest_date_nonexistent PASSED      [ 23%]
tests/test_data_manager.py::test_upsert_data PASSED                      [ 23%]
tests/test_data_manager.py::test_vacuum_db PASSED                        [ 24%]
tests/test_data_manager.py::test_multiple_tickers PASSED                 [ 24%]
tests/test_db_maintenance_comprehensive.py::test_init PASSED             [ 24%]
tests/test_db_maintenance_comprehensive.py::test_create_indexes PASSED   [ 24%]
tests/test_db_maintenance_comprehensive.py::test_create_indexes_error PASSED [ 24%]
tests/test_db_maintenance_comprehensive.py::test_backup_database PASSED  [ 24%]
tests/test_db_maintenance_comprehensive.py::test_backup_database_error PASSED [ 24%]
tests/test_db_maintenance_comprehensive.py::test_cleanup_old_backups PASSED [ 25%]
tests/test_db_maintenance_comprehensive.py::test_vacuum_database PASSED  [ 25%]
tests/test_db_maintenance_comprehensive.py::test_get_database_stats PASSED [ 25%]
tests/test_dl_strategy.py::test_dl_strategy PASSED                       [ 25%]
tests/test_dynamic_ensemble.py::test_dynamic_ensemble_initialization PASSED [ 25%]
tests/test_dynamic_ensemble.py::test_prediction_integration PASSED       [ 25%]
tests/test_dynamic_ensemble.py::test_weight_update PASSED                [ 26%]
tests/test_dynamic_ensemble.py::test_weight_update_down_market PASSED    [ 26%]
tests/test_dynamic_stop.py::test_init PASSED                             [ 26%]
tests/test_dynamic_stop.py::test_register_entry_with_initial_stop PASSED [ 26%]
tests/test_dynamic_stop.py::test_register_entry_without_initial_stop PASSED [ 26%]
tests/test_dynamic_stop.py::test_update_stop_price_increase PASSED       [ 26%]
tests/test_dynamic_stop.py::test_update_stop_price_decrease PASSED       [ 26%]
tests/test_dynamic_stop.py::test_update_stop_profit_locking PASSED       [ 27%]
tests/test_dynamic_stop.py::test_update_stop_no_entry PASSED             [ 27%]
tests/test_dynamic_stop.py::test_update_stop_with_atr_column PASSED      [ 27%]
tests/test_dynamic_stop.py::test_update_stop_insufficient_data PASSED    [ 27%]
tests/test_dynamic_stop.py::test_update_stop_none_dataframe PASSED       [ 27%]
tests/test_dynamic_stop.py::test_check_exit_hit PASSED                   [ 27%]
tests/test_dynamic_stop.py::test_check_exit_not_hit PASSED               [ 28%]
tests/test_dynamic_stop.py::test_check_exit_no_stop PASSED               [ 28%]
tests/test_dynamic_stop.py::test_multiple_positions PASSED               [ 28%]
tests/test_dynamic_stop.py::test_trailing_stop_behavior PASSED           [ 28%]
tests/test_encryption_coverage.py::TestDataEncryption::test_init PASSED  [ 28%]
tests/test_encryption_coverage.py::TestDataEncryption::test_init_invalid_key_length PASSED [ 28%]
tests/test_encryption_coverage.py::TestDataEncryption::test_encrypt_bytes PASSED [ 28%]
tests/test_encryption_coverage.py::TestDataEncryption::test_decrypt_bytes PASSED [ 29%]
tests/test_encryption_coverage.py::TestDataEncryption::test_encrypt_decrypt_roundtrip PASSED [ 29%]
tests/test_encryption_coverage.py::TestDataEncryption::test_encrypt_string PASSED [ 29%]
tests/test_encryption_coverage.py::TestDataEncryption::test_decrypt_string PASSED [ 29%]
tests/test_encryption_coverage.py::TestDataEncryption::test_encrypt_string_roundtrip PASSED [ 29%]
tests/test_encryption_coverage.py::TestDataEncryption::test_different_encryptions_different_results PASSED [ 29%]
tests/test_encryption_coverage.py::TestAPIKeyManager::test_init PASSED   [ 30%]
tests/test_encryption_coverage.py::TestAPIKeyManager::test_encrypt_api_key PASSED [ 30%]
tests/test_encryption_coverage.py::TestAPIKeyManager::test_decrypt_api_key PASSED [ 30%]
tests/test_encryption_coverage.py::TestAPIKeyManager::test_store_and_retrieve_api_key PASSED [ 30%]
tests/test_encryption_coverage.py::TestAPIKeyManager::test_retrieve_nonexistent_key PASSED [ 30%]
tests/test_encryption_coverage.py::TestAPIKeyManager::test_update_api_key PASSED [ 30%]
tests/test_ensemble_coverage.py::test_ensemble_voter_init PASSED         [ 30%]
tests/test_ensemble_coverage.py::test_ensemble_voter_init_with_weights PASSED [ 31%]
tests/test_ensemble_coverage.py::test_ensemble_voter_vote_buy_signal PASSED [ 31%]
tests/test_ensemble_coverage.py::test_ensemble_voter_vote_sell_signal PASSED [ 31%]
tests/test_ensemble_coverage.py::test_ensemble_voter_vote_hold_signal PASSED [ 31%]
tests/test_ensemble_coverage.py::test_ensemble_voter_vote_weighted PASSED [ 31%]
tests/test_ensemble_coverage.py::test_ensemble_voter_vote_details PASSED [ 31%]
tests/test_error_handling_coverage.py::test_error_category_values PASSED [ 32%]
tests/test_error_handling_coverage.py::test_retryable_error PASSED       [ 32%]
tests/test_error_handling_coverage.py::test_classify_error_network PASSED [ 32%]
tests/test_error_handling_coverage.py::test_classify_error_timeout PASSED [ 32%]
tests/test_error_handling_coverage.py::test_classify_error_file_not_found PASSED [ 32%]
tests/test_error_handling_coverage.py::test_classify_error_permission PASSED [ 32%]
tests/test_error_handling_coverage.py::test_classify_error_value PASSED  [ 32%]
tests/test_error_handling_coverage.py::test_classify_error_unknown PASSED [ 33%]
tests/test_error_handling_coverage.py::test_get_user_friendly_message PASSED [ 33%]
tests/test_error_handling_coverage.py::test_get_user_friendly_message_network PASSED [ 33%]
tests/test_error_handling_coverage.py::test_retry_decorator_success PASSED [ 33%]
tests/test_error_handling_coverage.py::test_retry_decorator_failure_then_success PASSED [ 33%]
tests/test_error_handling_coverage.py::test_retry_decorator_all_failures PASSED [ 33%]
tests/test_error_handling_coverage.py::test_network_retry_decorator PASSED [ 34%]
tests/test_error_handling_coverage.py::test_api_retry_decorator PASSED   [ 34%]
tests/test_error_handling_coverage.py::test_log_error_with_context PASSED [ 34%]
tests/test_error_handling_coverage.py::test_log_error_with_context_warning PASSED [ 34%]
tests/test_error_handling_coverage.py::test_log_error_with_context_critical PASSED [ 34%]
tests/test_execution.py::test_init PASSED                                [ 34%]
tests/test_execution.py::test_init_with_real_broker PASSED               [ 34%]
tests/test_execution.py::test_check_risk_safe PASSED                     [ 35%]
tests/test_execution.py::test_check_risk_max_drawdown_exceeded PASSED    [ 35%]
tests/test_execution.py::test_check_risk_with_real_broker PASSED         [ 35%]
tests/test_execution.py::test_check_risk_with_real_broker_divergence PASSED [ 35%]
tests/test_execution.py::test_check_risk_with_real_broker_error PASSED   [ 35%]
tests/test_execution.py::test_calculate_position_size_us_stock PASSED    [ 35%]
tests/test_execution.py::test_calculate_position_size_japan_stock PASSED [ 36%]
tests/test_execution.py::test_calculate_position_size_with_confidence PASSED [ 36%]
tests/test_execution.py::test_calculate_position_size_insufficient_cash PASSED [ 36%]
tests/test_execution.py::test_calculate_position_size_too_expensive PASSED [ 36%]
tests/test_execution.py::test_execute_orders_buy_success PASSED          [ 36%]
tests/test_execution.py::test_execute_orders_buy_with_quantity PASSED    [ 36%]
tests/test_execution.py::test_execute_orders_buy_failed PASSED           [ 36%]
tests/test_execution.py::test_execute_orders_no_price PASSED             [ 37%]
tests/test_execution.py::test_execute_orders_sell PASSED                 [ 37%]
tests/test_execution.py::test_execute_orders_risk_check_failed PASSED    [ 37%]
tests/test_execution.py::test_execute_orders_with_real_broker PASSED     [ 37%]
tests/test_execution_real.py::TestExecutionEngineReal::test_execute_orders_real_buy PASSED [ 37%]
tests/test_execution_real.py::TestExecutionEngineReal::test_execute_orders_real_sell_skipped PASSED [ 37%]
tests/test_execution_real.py::TestExecutionEngineReal::test_check_risk_divergence PASSED [ 38%]
tests/test_features_comprehensive.py::test_add_technical_indicators PASSED [ 38%]
tests/test_features_comprehensive.py::test_add_frequency_features PASSED [ 38%]
tests/test_features_comprehensive.py::test_add_sentiment_features PASSED [ 38%]
tests/test_features_comprehensive.py::test_add_sentiment_features_no_history PASSED [ 38%]
tests/test_features_comprehensive.py::test_add_sentiment_features_error PASSED [ 38%]
tests/test_features_comprehensive.py::test_add_advanced_features PASSED  [ 38%]
tests/test_features_comprehensive.py::test_add_advanced_features_short_data PASSED [ 39%]
tests/test_features_comprehensive.py::test_add_macro_features PASSED     [ 39%]
tests/test_features_comprehensive.py::test_add_macro_features_empty PASSED [ 39%]
tests/test_features_comprehensive.py::test_add_macro_features_alignment PASSED [ 39%]
tests/test_formatters.py::test_format_currency_basic PASSED              [ 39%]
tests/test_formatters.py::test_format_currency_with_symbol PASSED        [ 39%]
tests/test_formatters.py::test_format_currency_with_sign PASSED          [ 40%]
tests/test_formatters.py::test_format_currency_none PASSED               [ 40%]
tests/test_formatters.py::test_format_currency_nan PASSED                [ 40%]
tests/test_formatters.py::test_format_percentage_basic PASSED            [ 40%]
tests/test_formatters.py::test_format_percentage_with_sign PASSED        [ 40%]
tests/test_formatters.py::test_format_percentage_none PASSED             [ 40%]
tests/test_formatters.py::test_format_number_basic PASSED                [ 40%]
tests/test_formatters.py::test_format_number_with_suffix PASSED          [ 41%]
tests/test_formatters.py::test_format_number_none PASSED                 [ 41%]
tests/test_formatters.py::test_format_large_number_thousands PASSED      [ 41%]
tests/test_formatters.py::test_format_large_number_millions PASSED       [ 41%]
tests/test_formatters.py::test_format_large_number_billions PASSED       [ 41%]
tests/test_formatters.py::test_format_large_number_negative PASSED       [ 41%]
tests/test_formatters.py::test_format_large_number_none PASSED           [ 42%]
tests/test_formatters.py::test_format_date_basic PASSED                  [ 42%]
tests/test_formatters.py::test_format_date_custom_format PASSED          [ 42%]
tests/test_formatters.py::test_format_date_string_input PASSED           [ 42%]
tests/test_formatters.py::test_format_date_none PASSED                   [ 42%]
tests/test_formatters.py::test_get_risk_level_low PASSED                 [ 42%]
tests/test_formatters.py::test_get_risk_level_medium PASSED              [ 42%]
tests/test_formatters.py::test_get_risk_level_high PASSED                [ 43%]
tests/test_formatters.py::test_get_sentiment_label_positive PASSED       [ 43%]
tests/test_formatters.py::test_get_sentiment_label_negative PASSED       [ 43%]
tests/test_formatters.py::test_get_sentiment_label_neutral PASSED        [ 43%]
tests/test_formatters.py::test_truncate_text_short PASSED                [ 43%]
tests/test_formatters.py::test_truncate_text_long PASSED                 [ 43%]
tests/test_formatters.py::test_truncate_text_custom_suffix PASSED        [ 44%]
tests/test_formatters.py::test_truncate_text_none PASSED                 [ 44%]
tests/test_formatters.py::test_style_dataframe_currency PASSED           [ 44%]
tests/test_formatters.py::test_style_dataframe_currency_missing_column PASSED [ 44%]
tests/test_formatters.py::test_style_dataframe_percentage PASSED         [ 44%]
tests/test_formatters.py::test_format_currency_jp_small PASSED           [ 44%]
tests/test_formatters.py::test_format_currency_jp_man PASSED             [ 44%]
tests/test_formatters.py::test_format_currency_jp_oku PASSED             [ 45%]
tests/test_formatters.py::test_format_currency_jp_none PASSED            [ 45%]
tests/test_formatters.py::test_format_currency_jp_nan PASSED             [ 45%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_initialization PASSED [ 45%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_calculate_daily_pnl PASSED [ 45%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_is_safe_to_trade_daily_loss_limit PASSED [ 45%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_is_safe_to_trade_vix_check PASSED [ 46%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_get_target_tickers PASSED [ 46%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_filter_by_market_cap PASSED [ 46%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_fetch_data_with_retry_success PASSED [ 46%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_fetch_data_with_retry_failure PASSED [ 46%]
tests/test_fully_automated_trader.py::TestFullyAutomatedTrader::test_emergency_stop PASSED [ 46%]
tests/test_fundamentals.py::test_init PASSED                             [ 46%]
tests/test_fundamentals.py::test_filter_undervalued_pass PASSED          [ 47%]
tests/test_fundamentals.py::test_filter_undervalued_high_pe PASSED       [ 47%]
tests/test_fundamentals.py::test_filter_undervalued_high_pbr PASSED      [ 47%]
tests/test_fundamentals.py::test_filter_undervalued_missing_pe PASSED    [ 47%]
tests/test_fundamentals.py::test_filter_undervalued_missing_pbr PASSED   [ 47%]
tests/test_fundamentals.py::test_filter_undervalued_empty PASSED         [ 47%]
tests/test_fundamentals.py::test_filter_undervalued_none PASSED          [ 48%]
tests/test_fundamentals.py::test_filter_undervalued_custom_thresholds PASSED [ 48%]
tests/test_fundamentals.py::test_filter_quality_pass PASSED              [ 48%]
tests/test_fundamentals.py::test_filter_quality_fail PASSED              [ 48%]
tests/test_fundamentals.py::test_filter_quality_missing_roe PASSED       [ 48%]
tests/test_fundamentals.py::test_filter_quality_none PASSED              [ 48%]
tests/test_fundamentals.py::test_filter_quality_custom_threshold PASSED  [ 48%]
tests/test_fundamentals.py::test_filter_large_cap_pass PASSED            [ 49%]
tests/test_fundamentals.py::test_filter_large_cap_fail PASSED            [ 49%]
tests/test_fundamentals.py::test_filter_large_cap_missing PASSED         [ 49%]
tests/test_fundamentals.py::test_filter_large_cap_none PASSED            [ 49%]
tests/test_fundamentals.py::test_filter_large_cap_custom_threshold PASSED [ 49%]
tests/test_fundamentals.py::test_combined_filters PASSED                 [ 49%]
tests/test_hierarchical_strategy.py::test_init PASSED                    [ 50%]
tests/test_hierarchical_strategy.py::test_generate_signals_empty_dataframe PASSED [ 50%]
tests/test_hierarchical_strategy.py::test_generate_signals_none PASSED   [ 50%]
tests/test_hierarchical_strategy.py::test_generate_signals_missing_close PASSED [ 50%]
tests/test_hierarchical_strategy.py::test_generate_signals_basic PASSED  [ 50%]
tests/test_hierarchical_strategy.py::test_generate_signals_mtf_error PASSED [ 50%]
tests/test_hierarchical_strategy.py::test_generate_signals_insufficient_data PASSED [ 50%]
tests/test_hierarchical_strategy.py::test_get_signal_explanation_buy PASSED [ 51%]
tests/test_hierarchical_strategy.py::test_get_signal_explanation_sell PASSED [ 51%]
tests/test_hierarchical_strategy.py::test_get_signal_explanation_hold PASSED [ 51%]
tests/test_hierarchical_strategy.py::test_analyze_method PASSED          [ 51%]
tests/test_hierarchical_strategy.py::test_signals_with_bullish_trend PASSED [ 51%]
tests/test_hierarchical_strategy.py::test_signals_with_bearish_trend PASSED [ 51%]
tests/test_hierarchical_strategy.py::test_signals_consistency PASSED     [ 52%]
tests/test_hierarchical_strategy.py::test_integration_with_mtf_analyzer PASSED [ 52%]
tests/test_kelly_criterion.py::test_init PASSED                          [ 52%]
tests/test_kelly_criterion.py::test_calculate_size_positive_edge PASSED  [ 52%]
tests/test_kelly_criterion.py::test_calculate_size_half_kelly PASSED     [ 52%]
tests/test_kelly_criterion.py::test_calculate_size_negative_edge PASSED  [ 52%]
tests/test_kelly_criterion.py::test_calculate_size_zero_win_loss_ratio PASSED [ 52%]
tests/test_kelly_criterion.py::test_calculate_size_negative_win_loss_ratio PASSED [ 53%]
tests/test_kelly_criterion.py::test_calculate_size_max_cap PASSED        [ 53%]
tests/test_kelly_criterion.py::test_calculate_from_history_positive_returns PASSED [ 53%]
tests/test_kelly_criterion.py::test_calculate_from_history_all_wins PASSED [ 53%]
tests/test_kelly_criterion.py::test_calculate_from_history_all_losses PASSED [ 53%]
tests/test_kelly_criterion.py::test_calculate_from_history_empty_series PASSED [ 53%]
tests/test_kelly_criterion.py::test_calculate_from_history_none PASSED   [ 54%]
tests/test_kelly_criterion.py::test_calculate_from_history_zero_avg_loss PASSED [ 54%]
tests/test_kelly_criterion.py::test_calculate_from_history_realistic_scenario PASSED [ 54%]
tests/test_kelly_criterion.py::test_calculate_from_history_breakeven PASSED [ 54%]
tests/test_kelly_criterion.py::test_different_max_position_sizes PASSED  [ 54%]
tests/test_live_trading.py::TestPaperBroker::test_buy_order PASSED       [ 54%]
tests/test_live_trading.py::TestPaperBroker::test_initial_state PASSED   [ 54%]
tests/test_live_trading.py::TestPaperBroker::test_persistence PASSED     [ 55%]
tests/test_live_trading.py::TestPaperBroker::test_sell_order PASSED      [ 55%]
tests/test_live_trading.py::TestLiveTradingEngine::test_run_cycle PASSED [ 55%]
tests/test_llm_analyzer.py::TestLLMAnalyzer::test_empty_news PASSED      [ 55%]
tests/test_llm_analyzer.py::TestLLMAnalyzer::test_gemini_analysis PASSED [ 55%]
tests/test_llm_analyzer.py::TestLLMAnalyzer::test_mock_analysis PASSED   [ 55%]
tests/test_logging_config.py::test_json_formatter_basic PASSED           [ 56%]
tests/test_logging_config.py::test_json_formatter_with_user_id PASSED    [ 56%]
tests/test_logging_config.py::test_json_formatter_with_request_id PASSED [ 56%]
tests/test_logging_config.py::test_json_formatter_with_exception PASSED  [ 56%]
tests/test_logging_config.py::test_setup_logging_creates_directory PASSED [ 56%]
tests/test_logging_config.py::test_setup_logging_returns_logger PASSED   [ 56%]
tests/test_logging_config.py::test_setup_logging_log_level PASSED        [ 56%]
tests/test_logging_config.py::test_get_logger PASSED                     [ 57%]
tests/test_logging_config.py::test_get_logger_different_names PASSED     [ 57%]
tests/test_ml_pipeline.py::test_registry_init PASSED                     [ 57%]
tests/test_ml_pipeline.py::test_register_model PASSED                    [ 57%]
tests/test_ml_pipeline.py::test_get_latest_model PASSED                  [ 57%]
tests/test_ml_pipeline.py::test_get_best_model PASSED                    [ 57%]
tests/test_ml_pipeline.py::test_continuous_learner PASSED                [ 58%]
tests/test_ml_pipeline.py::test_continuous_learner_failure PASSED        [ 58%]
tests/test_ml_strategy.py::TestMLStrategy::test_generate_signals PASSED  [ 58%]
tests/test_ml_strategy.py::TestMLStrategy::test_initialization PASSED    [ 58%]
tests/test_ml_strategy.py::TestMLStrategy::test_insufficient_data PASSED [ 58%]
tests/test_multi_timeframe.py::test_init PASSED                          [ 58%]
tests/test_multi_timeframe.py::test_resample_data_weekly PASSED          [ 58%]
tests/test_multi_timeframe.py::test_resample_data_monthly PASSED         [ 59%]
tests/test_multi_timeframe.py::test_resample_data_empty PASSED           [ 59%]
tests/test_multi_timeframe.py::test_resample_data_none PASSED            [ 59%]
tests/test_multi_timeframe.py::test_resample_data_with_adj_close PASSED  [ 59%]
tests/test_multi_timeframe.py::test_resample_data_non_datetime_index PASSED [ 59%]
tests/test_multi_timeframe.py::test_calculate_mtf_indicators PASSED      [ 59%]
tests/test_multi_timeframe.py::test_calculate_mtf_indicators_trend_values PASSED [ 60%]
tests/test_multi_timeframe.py::test_merge_mtf_features PASSED            [ 60%]
tests/test_multi_timeframe.py::test_merge_mtf_features_empty_daily PASSED [ 60%]
tests/test_multi_timeframe.py::test_merge_mtf_features_empty_mtf PASSED  [ 60%]
tests/test_multi_timeframe.py::test_merge_mtf_features_none PASSED       [ 60%]
tests/test_multi_timeframe.py::test_merge_mtf_features_no_prefix_columns PASSED [ 60%]
tests/test_multi_timeframe.py::test_add_mtf_features PASSED              [ 60%]
tests/test_multi_timeframe.py::test_add_mtf_features_integration PASSED  [ 61%]
tests/test_notifier_comprehensive.py::test_line_notify_service PASSED    [ 61%]
tests/test_notifier_comprehensive.py::test_discord_webhook_service PASSED [ 61%]
tests/test_notifier_comprehensive.py::test_slack_webhook_service PASSED  [ 61%]
tests/test_notifier_comprehensive.py::test_legacy_notifier PASSED        [ 61%]
tests/test_notifier_comprehensive.py::test_legacy_notifier_no_webhook PASSED [ 61%]
tests/test_optimization.py::TestHyperparameterOptimizer::test_optimizer_initialization PASSED [ 62%]
tests/test_optimization.py::TestHyperparameterOptimizer::test_optimize_random_forest_small_trials PASSED [ 62%]
tests/test_optimization.py::TestHyperparameterOptimizer::test_optimize_lightgbm_small_trials PASSED [ 62%]
tests/test_optimization.py::TestHyperparameterOptimizer::test_save_and_load_params PASSED [ 62%]
tests/test_optimization_coverage.py::TestOptimization::test_hyperparameter_optimizer_init PASSED [ 62%]
tests/test_optimization_coverage.py::TestOptimization::test_optimize_lightgbm PASSED [ 62%]
tests/test_optimization_coverage.py::TestOptimization::test_optimize_multi_objective PASSED [ 62%]
tests/test_optimization_coverage.py::TestOptimization::test_optimize_random_forest PASSED [ 63%]
tests/test_optimization_coverage.py::TestOptimization::test_optimize_strategy_wfo PASSED [ 63%]
tests/test_optimization_transformer.py::test_optimize_transformer PASSED [ 63%]
tests/test_optimizer_new.py::test_optimizer_init PASSED                  [ 63%]
tests/test_optimizer_new.py::test_objective_sma_crossover PASSED         [ 63%]
tests/test_optimizer_new.py::test_objective_invalid_sma_windows PASSED   [ 63%]
tests/test_optimizer_new.py::test_objective_rsi_strategy PASSED          [ 64%]
tests/test_optimizer_new.py::test_objective_bollinger_bands_strategy PASSED [ 64%]
tests/test_optimizer_new.py::test_objective_combined_strategy PASSED     [ 64%]
tests/test_optimizer_new.py::test_objective_unknown_strategy PASSED      [ 64%]
tests/test_optimizer_new.py::test_objective_insufficient_trades PASSED   [ 64%]
tests/test_optimizer_new.py::test_objective_no_result PASSED             [ 64%]
tests/test_optimizer_new.py::test_optimize PASSED                        [ 64%]
tests/test_optimizer_new.py::test_optimize_logging_suppression PASSED    [ 65%]
tests/test_paper_trade.py::test_initial_balance PASSED                   [ 65%]
tests/test_paper_trade.py::test_execute_trade_buy PASSED                 [ 65%]
tests/test_paper_trade.py::test_execute_trade_sell PASSED                [ 65%]
tests/test_paper_trade.py::test_insufficient_funds PASSED                [ 65%]
tests/test_paper_trade.py::test_insufficient_shares PASSED               [ 65%]
tests/test_paper_trade.py::test_trade_history PASSED                     [ 66%]
tests/test_patterns_coverage.py::test_find_local_extrema PASSED          [ 66%]
tests/test_patterns_coverage.py::test_detect_double_bottom_insufficient_data PASSED [ 66%]
tests/test_patterns_coverage.py::test_detect_double_bottom PASSED        [ 66%]
tests/test_patterns_coverage.py::test_detect_head_and_shoulders_bottom_insufficient_data PASSED [ 66%]
tests/test_patterns_coverage.py::test_detect_head_and_shoulders_bottom PASSED [ 66%]
tests/test_patterns_coverage.py::test_detect_triangle_insufficient_data PASSED [ 66%]
tests/test_patterns_coverage.py::test_detect_triangle PASSED             [ 67%]
tests/test_patterns_coverage.py::test_scan_for_patterns PASSED           [ 67%]
tests/test_patterns_coverage.py::test_scan_for_patterns_with_error PASSED [ 67%]
tests/test_performance.py::TestPerformance::test_sector_rotation_performance PASSED [ 67%]
tests/test_performance.py::TestPerformance::test_regime_detection_performance PASSED [ 67%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_init PASSED [ 67%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_init_custom_risk_free_rate PASSED [ 68%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_sharpe_ratio PASSED [ 68%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_sharpe_ratio_zero_std PASSED [ 68%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_sortino_ratio PASSED [ 68%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_sortino_ratio_positive_only PASSED [ 68%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_calmar_ratio PASSED [ 68%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_max_drawdown PASSED [ 68%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_max_drawdown_duration PASSED [ 69%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_win_rate PASSED [ 69%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_win_rate_positive_only PASSED [ 69%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_payoff_ratio PASSED [ 69%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_payoff_ratio_positive_only PASSED [ 69%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_omega_ratio PASSED [ 69%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_omega_ratio_positive_only PASSED [ 70%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_information_ratio PASSED [ 70%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_all_metrics PASSED [ 70%]
tests/test_performance_metrics_coverage.py::TestAdvancedMetrics::test_all_metrics_with_benchmark PASSED [ 70%]
tests/test_performance_metrics_coverage.py::TestTransactionCostModel::test_init PASSED [ 70%]
tests/test_performance_metrics_coverage.py::TestTransactionCostModel::test_init_custom PASSED [ 70%]
tests/test_performance_metrics_coverage.py::TestTransactionCostModel::test_calculate_cost PASSED [ 70%]
tests/test_performance_metrics_coverage.py::TestTransactionCostModel::test_calculate_cost_high_volume_participation PASSED [ 71%]
tests/test_performance_metrics_coverage.py::TestTransactionCostModel::test_calculate_cost_zero_volume PASSED [ 71%]
tests/test_phase29_integration.py::test_advanced_features PASSED         [ 71%]
tests/test_phase29_integration.py::test_stacking_ensemble PASSED         [ 71%]
tests/test_phase29_integration.py::test_hyperparameter_tuning PASSED     [ 71%]
tests/test_phase29_integration.py::test_performance_monitor PASSED       [ 71%]
tests/test_phase30_1_integration.py::test_online_learning PASSED         [ 72%]
tests/test_phase30_1_integration.py::test_regime_detector PASSED         [ 72%]
tests/test_phase30_1_integration.py::test_dynamic_risk_manager PASSED    [ 72%]
tests/test_phase30_1_integration.py::test_integration PASSED             [ 72%]
tests/test_phase30_2_mtf.py::test_mtf_strategy PASSED                    [ 72%]
tests/test_phase30_3_risk.py::test_risk_management PASSED                [ 72%]
tests/test_phase30_full_integration.py::TestPhase30FullIntegration::test_dynamic_stop_update PASSED [ 72%]
tests/test_phase30_full_integration.py::TestPhase30FullIntegration::test_kelly_position_sizing_integration PASSED [ 73%]
tests/test_portfolio.py::TestPortfolio::test_correlation_calculation PASSED [ 73%]
tests/test_portfolio.py::TestPortfolio::test_portfolio_simulation PASSED [ 73%]
tests/test_portfolio_coverage.py::TestPortfolioSimulation::test_calculate_correlation PASSED [ 73%]
tests/test_portfolio_coverage.py::TestPortfolioSimulation::test_optimize_portfolio PASSED [ 73%]
tests/test_portfolio_coverage.py::TestPortfolioSimulation::test_rebalance_portfolio PASSED [ 73%]
tests/test_portfolio_coverage.py::TestPortfolioSimulation::test_simulate_portfolio PASSED [ 74%]
tests/test_portfolio_coverage.py::TestPortfolioRiskManager::test_calculate_portfolio_volatility PASSED [ 74%]
tests/test_portfolio_coverage.py::TestPortfolioRiskManager::test_check_new_position_correlation PASSED [ 74%]
tests/test_portfolio_coverage.py::TestPortfolioRiskManager::test_check_new_position_sector PASSED [ 74%]
tests/test_portfolio_manager.py::test_init PASSED                        [ 74%]
tests/test_portfolio_manager.py::test_set_sector_map PASSED              [ 74%]
tests/test_portfolio_manager.py::test_check_new_position_empty_portfolio PASSED [ 74%]
tests/test_portfolio_manager.py::test_check_new_position_low_correlation PASSED [ 75%]
tests/test_portfolio_manager.py::test_check_new_position_high_correlation PASSED [ 75%]
tests/test_portfolio_manager.py::test_check_new_position_sector_limit PASSED [ 75%]
tests/test_portfolio_manager.py::test_check_new_position_sector_ok PASSED [ 75%]
tests/test_portfolio_manager.py::test_check_new_position_no_correlation_matrix PASSED [ 75%]
tests/test_portfolio_manager.py::test_check_new_position_empty_correlation_matrix PASSED [ 75%]
tests/test_portfolio_manager.py::test_check_new_position_ticker_not_in_matrix PASSED [ 76%]
tests/test_portfolio_manager.py::test_calculate_portfolio_volatility PASSED [ 76%]
tests/test_portfolio_manager.py::test_calculate_portfolio_volatility_empty_weights PASSED [ 76%]
tests/test_portfolio_manager.py::test_calculate_portfolio_volatility_no_cov_matrix PASSED [ 76%]
tests/test_portfolio_manager.py::test_calculate_portfolio_volatility_empty_cov_matrix PASSED [ 76%]
tests/test_portfolio_manager.py::test_calculate_portfolio_volatility_missing_ticker PASSED [ 76%]
tests/test_portfolio_manager.py::test_calculate_portfolio_volatility_single_asset PASSED [ 76%]
tests/test_portfolio_optimization.py::TestPortfolioOptimization::test_optimize_portfolio PASSED [ 77%]
tests/test_pytest_cov_optional.py::test_registers_cov_options_when_plugin_missing PASSED [ 77%]
tests/test_pytest_cov_optional.py::test_defers_when_plugin_present PASSED [ 77%]
tests/test_rakuten_broker.py::TestRakutenBroker::test_login_success PASSED [ 77%]
tests/test_rakuten_broker.py::TestRakutenBroker::test_get_balance_success PASSED [ 77%]
tests/test_rakuten_broker.py::TestRakutenBroker::test_buy_order_success PASSED [ 77%]
tests/test_rakuten_broker.py::TestRakutenBroker::test_parse_currency PASSED [ 78%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_init_default PASSED [ 78%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_init_custom PASSED [ 78%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_calculate_current_weights PASSED [ 78%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_calculate_current_weights_empty PASSED [ 78%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_needs_rebalancing_yes PASSED [ 78%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_needs_rebalancing_no PASSED [ 78%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_generate_rebalance_orders PASSED [ 79%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_calculate_transaction_costs PASSED [ 79%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_calculate_transaction_costs_empty PASSED [ 79%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_should_rebalance_by_time_daily PASSED [ 79%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_should_rebalance_by_time_weekly PASSED [ 79%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_should_rebalance_by_time_monthly PASSED [ 79%]
tests/test_rebalancer_coverage.py::TestDynamicRebalancer::test_should_rebalance_by_time_quarterly PASSED [ 80%]
tests/test_regime.py::test_regime_detector_initialization PASSED         [ 80%]
tests/test_regime.py::test_regime_detector_fit PASSED                    [ 80%]
tests/test_regime.py::test_regime_detector_predict PASSED                [ 80%]
tests/test_regime.py::test_regime_detector_history PASSED                [ 80%]
tests/test_regime.py::test_calculate_features PASSED                     [ 80%]
tests/test_regime.py::test_regime_detector_with_missing_data PASSED      [ 80%]
tests/test_regime_detector.py::test_init PASSED                          [ 81%]
tests/test_regime_detector.py::test_detect_regime PASSED                 [ 81%]
tests/test_regime_detector.py::test_detect_trend_fallback PASSED         [ 81%]
tests/test_regime_detector.py::test_detect_volatility_fallback PASSED    [ 81%]
tests/test_regime_detector.py::test_classify_regime_high_volatility PASSED [ 81%]
tests/test_regime_detector.py::test_classify_regime_low_volatility PASSED [ 81%]
tests/test_regime_detector.py::test_classify_regime_trending_up PASSED   [ 82%]
tests/test_regime_detector.py::test_classify_regime_trending_down PASSED [ 82%]
tests/test_regime_detector.py::test_classify_regime_ranging PASSED       [ 82%]
tests/test_regime_detector.py::test_get_regime_strategy_trending_up PASSED [ 82%]
tests/test_regime_detector.py::test_get_regime_strategy_trending_down PASSED [ 82%]
tests/test_regime_detector.py::test_get_regime_strategy_ranging PASSED   [ 82%]
tests/test_regime_detector.py::test_get_regime_strategy_high_volatility PASSED [ 82%]
tests/test_regime_detector.py::test_get_regime_strategy_low_volatility PASSED [ 83%]
tests/test_regime_detector.py::test_get_regime_strategy_none PASSED      [ 83%]
tests/test_regime_detector.py::test_get_regime_strategy_no_regime PASSED [ 83%]
tests/test_regime_detector.py::test_get_regime_history PASSED            [ 83%]
tests/test_regime_detector.py::test_get_regime_history_all PASSED        [ 83%]
tests/test_regime_detector.py::test_get_regime_statistics_empty PASSED   [ 83%]
tests/test_regime_detector.py::test_get_regime_statistics PASSED         [ 84%]
tests/test_regime_detector.py::test_multiple_regime_detections PASSED    [ 84%]
tests/test_regime_detector.py::test_regime_history_structure PASSED      [ 84%]
tests/test_risk_coverage.py::TestRiskGuard::test_check_daily_loss_limit PASSED [ 84%]
tests/test_risk_coverage.py::TestRiskGuard::test_check_drawdown_limit PASSED [ 84%]
tests/test_risk_coverage.py::TestRiskGuard::test_init_creates_default_state PASSED [ 84%]
tests/test_risk_coverage.py::TestRiskGuard::test_validate_order_halts_on_trigger PASSED [ 84%]
tests/test_risk_coverage.py::TestRiskLimiter::test_init_loads_config PASSED [ 85%]
tests/test_risk_coverage.py::TestRiskLimiter::test_validate_trade PASSED [ 85%]
tests/test_risk_guard.py::TestRiskGuard::test_initialization PASSED      [ 85%]
tests/test_risk_guard.py::TestRiskGuard::test_daily_loss_limit_breach PASSED [ 85%]
tests/test_risk_guard.py::TestRiskGuard::test_drawdown_limit PASSED      [ 85%]
tests/test_risk_guard.py::TestRiskGuard::test_persistence PASSED         [ 85%]
tests/test_risk_guard.py::TestRiskGuard::test_daily_reset_logic PASSED   [ 86%]
tests/test_risk_guard.py::TestRiskGuard::test_position_size_check PASSED [ 86%]
tests/test_risk_guard.py::TestRiskGuard::test_volatility_check PASSED    [ 86%]
tests/test_risk_limiter.py::test_init_defaults PASSED                    [ 86%]
tests/test_risk_limiter.py::test_check_position_size PASSED              [ 86%]
tests/test_risk_limiter.py::test_check_daily_trades PASSED               [ 86%]
tests/test_risk_limiter.py::test_check_daily_loss PASSED                 [ 86%]
tests/test_risk_limiter.py::test_check_total_exposure PASSED             [ 87%]
tests/test_risk_limiter.py::test_check_cash_reserve PASSED               [ 87%]
tests/test_risk_limiter.py::test_check_emergency_stop PASSED             [ 87%]
tests/test_risk_limiter.py::test_validate_trade_success PASSED           [ 87%]
tests/test_risk_limiter.py::test_validate_trade_failure PASSED           [ 87%]
tests/test_risk_limiter.py::test_get_risk_report PASSED                  [ 87%]
tests/test_sector_rotation.py::test_sector_rotation_initialization PASSED [ 88%]
tests/test_sector_rotation.py::test_calculate_sector_performance PASSED  [ 88%]
tests/test_sector_rotation.py::test_get_top_sectors PASSED               [ 88%]
tests/test_sector_rotation.py::test_recommend_sectors_by_cycle PASSED    [ 88%]
tests/test_sector_rotation.py::test_calculate_optimal_weights PASSED     [ 88%]
tests/test_sector_rotation.py::test_analyze_cycle_from_regime PASSED     [ 88%]
tests/test_sector_rotation.py::test_get_sector_heatmap_data PASSED       [ 88%]
tests/test_sentiment.py::test_init PASSED                                [ 89%]
tests/test_sentiment.py::test_fetch_news PASSED                          [ 89%]
tests/test_sentiment.py::test_analyze_sentiment PASSED                   [ 89%]
tests/test_sentiment.py::test_get_market_sentiment PASSED                [ 89%]
tests/test_sentiment.py::test_save_sentiment_history PASSED              [ 89%]
tests/test_sentiment.py::test_save_sentiment_history_missing_keys PASSED [ 89%]
tests/test_sentiment.py::test_get_sentiment_history PASSED               [ 90%]
tests/test_small_modules.py::test_pytest_cov_optional_import PASSED      [ 90%]
tests/test_small_modules.py::test_constants_import PASSED                [ 90%]
tests/test_small_modules.py::test_constants_has_values PASSED            [ 90%]
tests/test_small_modules.py::test_dashboard_utils_import PASSED          [ 90%]
tests/test_small_modules.py::test_design_tokens_import PASSED            [ 90%]
tests/test_small_modules.py::test_prompts_import PASSED                  [ 90%]
tests/test_small_modules.py::test_visualizer_import PASSED               [ 91%]
tests/test_small_modules.py::test_patterns_import PASSED                 [ 91%]
tests/test_small_modules.py::test_ensemble_import PASSED                 [ 91%]
tests/test_small_modules.py::test_backtest_engine_import SKIPPED         [ 91%]
tests/test_small_modules.py::test_base_import PASSED                     [ 91%]
tests/test_smart_notifier_comprehensive.py::test_init PASSED             [ 91%]
tests/test_smart_notifier_comprehensive.py::test_init_no_config PASSED   [ 92%]
tests/test_smart_notifier_comprehensive.py::test_send_line_notify PASSED [ 92%]
tests/test_smart_notifier_comprehensive.py::test_send_line_notify_no_token PASSED [ 92%]
tests/test_smart_notifier_comprehensive.py::test_send_line_notify_with_image PASSED [ 92%]
tests/test_smart_notifier_comprehensive.py::test_send_discord_webhook PASSED [ 92%]
tests/test_smart_notifier_comprehensive.py::test_send_discord_webhook_with_image PASSED [ 92%]
tests/test_smart_notifier_comprehensive.py::test_send_daily_summary_rich PASSED [ 92%]
tests/test_strategies.py::TestStrategy::test_strategy_initialization PASSED [ 93%]
tests/test_strategies.py::TestStrategy::test_generate_signals_not_implemented PASSED [ 93%]
tests/test_strategies.py::TestSMACrossoverStrategy::test_initialization PASSED [ 93%]
tests/test_strategies.py::TestSMACrossoverStrategy::test_generate_signals_returns_series PASSED [ 93%]
tests/test_strategies.py::TestSMACrossoverStrategy::test_signals_are_valid_values PASSED [ 93%]
tests/test_strategies.py::TestSMACrossoverStrategy::test_golden_cross_generates_buy_signal PASSED [ 93%]
tests/test_strategies.py::TestSMACrossoverStrategy::test_dead_cross_generates_sell_signal PASSED [ 94%]
tests/test_strategies.py::TestRSIStrategy::test_initialization PASSED    [ 94%]
tests/test_strategies.py::TestRSIStrategy::test_generate_signals_returns_series PASSED [ 94%]
tests/test_strategies.py::TestRSIStrategy::test_signals_are_valid_values PASSED [ 94%]
tests/test_strategies.py::TestRSIStrategy::test_oversold_recovery_generates_buy_signal PASSED [ 94%]
tests/test_strategies.py::TestBollingerBandsStrategy::test_initialization PASSED [ 94%]
tests/test_strategies.py::TestBollingerBandsStrategy::test_generate_signals_returns_series PASSED [ 94%]
tests/test_strategies.py::TestBollingerBandsStrategy::test_signals_are_valid_values PASSED [ 95%]
tests/test_strategies.py::TestBollingerBandsStrategy::test_lower_band_touch_generates_buy_signal PASSED [ 95%]
tests/test_strategies_base.py::test_order_dataclass PASSED               [ 95%]
tests/test_strategies_base.py::test_strategy_init PASSED                 [ 95%]
tests/test_strategies_base.py::test_apply_trend_filter PASSED            [ 95%]
tests/test_strategies_base.py::test_apply_trend_filter_disabled PASSED   [ 95%]
tests/test_strategies_base.py::test_generate_signals_not_implemented PASSED [ 96%]
tests/test_strategies_base.py::test_analyze PASSED                       [ 96%]
tests/test_strategies_base.py::test_analyze_empty PASSED                 [ 96%]
tests/test_strategies_base.py::test_get_signal_explanation PASSED        [ 96%]
tests/test_strategies_legacy_coverage.py::TestStrategiesLegacy::test_bollinger_bands_strategy PASSED [ 96%]
tests/test_strategies_legacy_coverage.py::TestStrategiesLegacy::test_combined_strategy PASSED [ 96%]
tests/test_strategies_legacy_coverage.py::TestStrategiesLegacy::test_dividend_strategy PASSED [ 96%]
tests/test_strategies_legacy_coverage.py::TestStrategiesLegacy::test_multi_timeframe_strategy PASSED [ 97%]
tests/test_strategies_legacy_coverage.py::TestStrategiesLegacy::test_rsi_strategy PASSED [ 97%]
tests/test_strategies_legacy_coverage.py::TestStrategiesLegacy::test_sma_crossover_strategy PASSED [ 97%]
tests/test_strategies_legacy_coverage.py::TestStrategiesLegacy::test_strategy_base_class PASSED [ 97%]
tests/test_ui_renderers.py::TestUIRenderers::test_render_performance_tab_empty PASSED [ 97%]
tests/test_ui_renderers.py::TestUIRenderers::test_render_performance_tab_with_data PASSED [ 97%]
tests/test_ui_renderers.py::TestUIRenderers::test_render_performance_tab_error_handling PASSED [ 98%]
tests/test_ui_renderers.py::TestUIRenderers::test_render_paper_trading_tab PASSED [ 98%]
tests/test_ui_renderers.py::TestUIRenderers::test_render_market_scan_tab PASSED [ 98%]
tests/test_ui_renderers_coverage.py::TestUIRenderers::test_render_integrated_signal PASSED [ 98%]
tests/test_ui_renderers_coverage.py::TestUIRenderers::test_render_market_scan_tab FAILED [ 98%]
tests/test_ui_renderers_coverage.py::TestUIRenderers::test_render_paper_trading_tab PASSED [ 98%]
tests/test_ui_renderers_coverage.py::TestUIRenderers::test_render_performance_tab PASSED [ 98%]
tests/test_visualizer.py::test_init PASSED                               [ 99%]
tests/test_visualizer.py::test_generate_equity_chart PASSED              [ 99%]
tests/test_visualizer.py::test_generate_equity_chart_empty PASSED        [ 99%]
tests/test_visualizer.py::test_generate_equity_chart_missing_columns PASSED [ 99%]
tests/test_visualizer.py::test_generate_pnl_bar_chart PASSED             [ 99%]
tests/test_visualizer.py::test_generate_pnl_bar_chart_negative PASSED    [ 99%]
tests/test_visualizer.py::test_generate_equity_chart_timestamp_col PASSED [100%]

================================== FAILURES ===================================
_________________ TestUIRenderers.test_render_market_scan_tab _________________
tests\test_ui_renderers_coverage.py:100: in test_render_market_scan_tab
    render_market_scan_tab("All", "Japan", [], "1y", [MagicMock(name="Strategy1")], True, 0.1, False, 50, 5, 10, 100)
src\ui_renderers.py:531: in render_market_scan_tab
    display_sentiment_gauge(sentiment['score'], sentiment.get('news_count', 0))
src\ui_components.py:74: in display_sentiment_gauge
    col1, col2 = st.columns([2, 1])
E   ValueError: not enough values to unpack (expected 2, got 0)
============================== warnings summary ===============================
..\..\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\tensorflow\lite\python\util.py:51
..\..\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\tensorflow\lite\python\util.py:51
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\tensorflow\lite\python\util.py:51: DeprecationWarning: jax.xla_computation is deprecated. Please use the AOT APIs.
    from jax import xla_computation as _xla_computation

..\..\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\streamlit\elements\image.py:22
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\streamlit\elements\image.py:22: DeprecationWarning: 'imghdr' is deprecated and slated for removal in Python 3.13
    import imghdr

tests/test_phase29_integration.py::test_advanced_features
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase29_integration.py::test_advanced_features returned False, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_phase29_integration.py::test_stacking_ensemble
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase29_integration.py::test_stacking_ensemble returned False, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_phase29_integration.py::test_hyperparameter_tuning
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase29_integration.py::test_hyperparameter_tuning returned True, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_phase29_integration.py::test_performance_monitor
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase29_integration.py::test_performance_monitor returned True, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_phase30_1_integration.py::test_online_learning
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase30_1_integration.py::test_online_learning returned True, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_phase30_1_integration.py::test_regime_detector
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase30_1_integration.py::test_regime_detector returned True, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_phase30_1_integration.py::test_dynamic_risk_manager
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase30_1_integration.py::test_dynamic_risk_manager returned True, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_phase30_1_integration.py::test_integration
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\python.py:198: PytestReturnNotNoneWarning: Expected None, but tests/test_phase30_1_integration.py::test_integration returned True, which will be an error in a future version of pytest.  Did you mean to use `assert` instead of `return`?
    warnings.warn(

tests/test_pytest_cov_optional.py::test_registers_cov_options_when_plugin_missing
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\dash\testing\plugin.py:104: PytestDeprecationWarning: The hookimpl pytest_addhooks uses old-style configuration options (marks or attributes).
  Please use the pytest.hookimpl(tryfirst=True) decorator instead
   to configure the hooks.
   See https://docs.pytest.org/en/latest/deprecations.html#configuring-hook-specs-impls-using-markers
    @pytest.mark.tryfirst

tests/test_pytest_cov_optional.py::test_registers_cov_options_when_plugin_missing
  C:\Users\neoen\AppData\Local\Programs\Python\Python311\Lib\site-packages\_pytest\config\__init__.py:331: PluggyTeardownRaisedWarning: A plugin raised an exception during an old-style hookwrapper teardown.
  Plugin: helpconfig, Hook: pytest_cmdline_parse
  ArgumentError: argument --cov: conflicting option string: --cov
  For more information see https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.PluggyTeardownRaisedWarning
    config = pluginmanager.hook.pytest_cmdline_parse(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform win32, python 3.11.0-final-0 -----------
Name                                     Stmts   Miss  Cover   Missing
----------------------------------------------------------------------
src\advanced_backtest.py                   101    101     0%   6-282
src\advanced_features.py                   124     11    91%   39, 74, 107, 150, 174-175, 225, 273, 311-312, 332
src\advanced_models.py                      41      4    90%   35-41
src\advanced_risk.py                        89     89     0%   6-234
src\agents.py                              173     43    75%   24, 33, 59-69, 81, 91, 93, 110-115, 121-127, 131-137, 142-143, 145-146, 157, 181-188, 249
src\ai_analyst.py                           46     46     0%   5-97
src\alert_manager.py                       126    126     0%   5-270
src\alert_system.py                        125    125     0%   9-344
src\anomaly_detector.py                     90     90     0%   5-208
src\async_data_loader.py                   143     61    57%   57-63, 79, 82-96, 106-107, 114-127, 186-187, 190, 219-220, 226-229, 249-255, 260-265, 310-328
src\auth.py                                152     25    84%   87, 90, 93, 139, 235-238, 249-250, 287-291, 297-317
src\auto_rebalancer.py                     132     31    77%   50-51, 73-75, 109-110, 125-126, 142, 154-158, 173-174, 185, 196-198, 256-260, 272-278
src\auto_trader_ui.py                      107     74    31%   12-27, 30-36, 39-40, 43-56, 60-129, 144
src\backtest_engine.py                      45     41     9%   5-86
src\backtest_visualizer.py                  81     81     0%   6-314
src\backtester.py                          232     21    91%   83, 89, 94, 254, 272-274, 285-287, 300, 304-322
src\backup_manager.py                      115     31    73%   70-78, 104-106, 128, 144-145, 161, 177-178, 205-206, 220-222, 239-254
src\base.py                                120     51    58%   46-48, 53, 57-61, 68-70, 75, 79-83, 90-91, 96, 101, 105-113, 122, 127, 132, 137, 146, 151, 156, 161, 173-176, 180-186, 190-192
src\benchmark_comparator.py                 99     27    73%   38-48, 126, 178, 248-269
src\bert_sentiment.py                       72     27    62%   39-42, 55, 98-100, 104-128
src\broker.py                               42      7    83%   40, 45, 50, 55, 60, 65, 70
src\cache_config.py                          8      6    25%   9-20
src\cloud_storage.py                        79     37    53%   23-32, 40, 48, 55-57, 68-69, 80-82, 86-92, 96-106
src\config.py                               46      0   100%
src\config_manager.py                       47      4    91%   89-93
src\constants.py                            10      0   100%
src\copy_trading.py                        149    149     0%   5-382
src\cost_optimizer.py                      125     62    50%   56, 78-80, 157, 161, 184, 199, 216-228, 272-281, 286-343, 347
src\cross_validation.py                     43      1    98%   143
src\dashboard_utils.py                      36      1    97%   40
src\data_loader.py                         120     59    51%   33-35, 46-75, 82-83, 87-91, 105, 113-115, 119-120, 135-140, 151-159, 187-188, 196, 210-224
src\data_manager.py                         84     10    88%   63, 111-112, 142-144, 162-163, 173-174
src\db_maintenance.py                       86     18    79%   84-85, 97-99, 126-128, 132-144
src\design_tokens.py                        52      0   100%
src\dividend_strategy.py                    71     71     0%   6-236
src\dynamic_ensemble.py                     77     16    79%   56, 65, 99-100, 127-129, 142-143, 148-154
src\dynamic_risk_manager.py                 89     31    65%   108-110, 150-153, 175, 198, 218-232, 241, 260, 266-299
src\dynamic_risk_manager_refactored.py     121    121     0%   6-337
src\dynamic_stop.py                         52      2    96%   67-68
src\encryption.py                           74     13    82%   168-188
src\enhanced_performance_dashboard.py      144    144     0%   5-323
src\ensemble.py                             27      1    96%   52
src\error_handler.py                       109    109     0%   6-215
src\error_handling.py                       88     19    78%   82, 87, 124, 132, 286-301
src\execution.py                            78      0   100%
src\execution_optimizer.py                  69     69     0%   6-213
src\export_manager.py                       80     80     0%   5-175
src\factor_analyzer.py                      85     85     0%   6-269
src\features.py                            122     11    91%   60, 100, 105, 137-139, 146-147, 219, 225, 232
src\formatters.py                           83      2    98%   123-124
src\fundamentals.py                         26      2    92%   34, 48
src\hierarchical_strategy.py                42      2    95%   37-38
src\hyperparameter_tuning.py               111     53    52%   60, 158-172, 207-210, 235-238, 247-269, 281-287, 304-338, 342-349
src\ibkr_broker.py                          88     88     0%   1-154
src\integrated_signals.py                   69     18    74%   53, 65, 67, 74, 76, 86-87, 93, 95, 98, 104-111, 124, 126, 145
src\kelly_criterion.py                      35      1    97%   78
src\liquidity_analyzer.py                   74     74     0%   6-233
src\live_trading.py                        151     37    75%   47-48, 66, 70, 74, 100-103, 115, 126, 131-133, 177, 182-183, 188-189, 199-201, 207-208, 230-231, 239-244, 252-256, 259-260
src\llm_analyzer.py                         69     12    83%   12-15, 32-33, 84, 86, 89-91, 121
src\logging_config.py                       45      8    82%   93-102
src\macro_analyzer.py                       89     89     0%   6-208
src\meta_learner.py                        107    107     0%   5-264
src\metrics_collector.py                    87     87     0%   5-197
src\ml_pipeline.py                          89     20    78%   30-35, 42-43, 77-79, 86, 95-97, 105, 112, 119-121
src\monitoring_dashboard.py                 96     96     0%   5-174
src\mpt_optimizer.py                       102    102     0%   6-302
src\multi_timeframe.py                      77      6    92%   116, 118, 155, 171, 178, 180
src\nisa_manager.py                        115    115     0%   5-342
src\notifier.py                             81      1    99%   22
src\online_learning.py                     113     59    48%   72, 83-85, 163-171, 180-193, 202-219, 228-241, 250-255, 272-286, 291-315
src\optimization.py                        204     49    76%   26-28, 177-260, 390
src\optimizer.py                            47      0   100%
src\options_pricing.py                      89     89     0%   5-264
src\paper_trader.py                        144     50    65%   13-24, 60-66, 115, 144, 148-168, 204-207, 243, 274-294
src\parallel_backtester.py                  76     76     0%   5-228
src\patterns.py                             91     12    87%   38, 64, 77, 84, 106, 120, 137, 145, 175-179
src\pdf_report_generator.py                 94     94     0%   5-187
src\performance.py                         167    154     8%   19, 23, 32-91, 100-177, 186-241, 250-270, 283-320
src\performance_attribution.py              95     95     0%   5-232
src\performance_metrics.py                  97     13    87%   37, 54, 121, 200-213
src\performance_monitor.py                 111    111     0%   10-314
src\performance_optimizer.py               113    113     0%   11-184
src\personal_features.py                   195    195     0%   6-345
src\portfolio.py                           131     64    51%   23, 46, 56, 72, 81, 87, 98, 140, 157-243
src\portfolio_manager.py                    42      0   100%
src\portfolio_manager_refactored.py        109    109     0%   6-263
src\portfolio_optimizer.py                 111    111     0%   6-269
src\production_manager.py                  101    101     0%   11-219
src\prompts.py                               3      0   100%
src\psychological_guard.py                  84     84     0%   6-294
src\pytest_cov_optional.py                  13      2    85%   14-15
src\rakuten_broker.py                      153     68    56%   43-49, 53-77, 82, 93-95, 116-118, 122-132, 137-138, 158-161, 166-167, 180-181, 203-204, 226-231, 235-238, 250-259
src\realtime_alerts.py                     129    129     0%   8-309
src\realtime_data.py                        96     96     0%   8-182
src\rebalancer.py                           84     29    65%   124-126, 140, 194-205, 210-246
src\recovery_manager.py                    107    107     0%   5-217
src\regime.py                              100     11    89%   62-63, 91-93, 103-105, 190-191, 196, 225, 230
src\regime_detector.py                     110     23    79%   100-103, 107-109, 129, 133, 174-176, 196, 200, 330-352
src\rich_notifier.py                       106    106     0%   5-291
src\risk_guard.py                          102      8    92%   41, 61-62, 76-77, 168, 172, 193
src\risk_limiter.py                        135     17    87%   191-221, 225
src\rl_agent.py                             74     74     0%   1-106
src\rl_environment.py                       65     65     0%   1-145
src\sector_rotation.py                      83      9    89%   47, 53-54, 77, 126, 144-145, 160, 173
src\sentiment.py                            74     11    85%   42-43, 61, 77, 79, 168-173
src\simple_dashboard.py                    113    113     0%   6-257
src\smart_notifier.py                       63      8    87%   51-52, 62-63, 69, 85-87
src\stacking_ensemble.py                   107     81    24%   71-97, 122-176, 188-197, 210-211, 220-231, 248-283, 287-293
src\strategies\__init__.py                   7      0   100%
src\strategies\base.py                      50      0   100%
src\strategies\custom\__init__.py            0      0   100%
src\strategies_legacy.py                   725    460    37%   15-20, 24-26, 71, 80, 91-95, 105, 120-124, 135, 142, 154-158, 168, 184-188, 199, 220-224, 234, 275, 290-294, 311-312, 320, 341-358, 361-365, 380-384, 387-392, 396, 406-467, 470-474, 484, 489-491, 495-535, 548-615, 619-625, 629-658, 668-670, 673-698, 701-725, 733-736, 742-798, 802-820, 827-830, 833-858, 861-885, 892-895, 898-922, 925-949, 958-970, 973-992, 1003, 1007-1016, 1046, 1092-1095, 1098-1103, 1115-1116, 1119-1131, 1134-1138
src\strategy_marketplace.py                134    134     0%   5-381
src\streaming_pipeline.py                   84     84     0%   7-202
src\tax_calculator.py                       82     82     0%   5-280
src\tax_report_generator.py                 85     85     0%   5-268
src\trade_explainer.py                      32     32     0%   5-99
src\trader_profile.py                      123    123     0%   5-397
src\trading_performance_monitor.py          98     46    53%   168, 193-236, 251, 288-348, 352-360
src\transformer_model.py                   107    107     0%   8-339
src\ui_advanced_analytics.py               157    157     0%   5-291
src\ui_ai_chat.py                           46     46     0%   4-76
src\ui_ai_report.py                         48     48     0%   4-80
src\ui_alerts.py                            79     79     0%   4-158
src\ui_automation.py                        77     77     0%   5-132
src\ui_components.py                       130    110    15%   19-27, 38-47, 62-64, 66-68, 76-105, 133-170, 190-219, 229-240, 258-275, 296-303, 317-327
src\ui_customizer.py                        82     82     0%   5-240
src\ui_export.py                            83     83     0%   4-162
src\ui_renderers.py                        560    401    28%   71-75, 102-118, 126-136, 152, 163-164, 171-198, 239-243, 262-272, 279-286, 290-297, 322-331, 345-506, 522-528, 534-802, 808-920, 931-970, 1010
src\ui_risk_dashboard.py                   118    118     0%   5-232
src\visualizer.py                           75      8    89%   23-24, 98-100, 155-157
src\xai.py                                  78     78     0%   8-227
----------------------------------------------------------------------
TOTAL                                    13053   8127    38%
Coverage HTML written to dir htmlcov

=========================== short test summary info ===========================
FAILED tests/test_ui_renderers_coverage.py::TestUIRenderers::test_render_market_scan_tab
====== 1 failed, 648 passed, 1 skipped, 13 warnings in 62.15s (0:01:02) =======
