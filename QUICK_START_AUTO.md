# 🚀 AGStock フルオート投資システム - クイックスタートガイド

## 📖 これは何？

**ワンクリックで動く完全自動投資システムです。**

難しい設定は一切不要。起動したら、あとはシステムが：
- 📊 市場を自動スキャン
- 🤖 AI が最適な銘柄を選定
- 💰 自動的に売買
- 📈 結果をレポート

## 🎯 3ステップで開始

### ステップ1: 起動
```bash
python auto_invest.py
```

たったこれだけ！

### ステップ2: 結果確認
```bash
streamlit run app.py
```

ブラウザで詳細を確認できます。

### ステップ3: 毎日自動実行（オプション）

#### Windows タスクスケジューラー
1. タスクスケジューラーを開く
2. 「基本タスクの作成」
3. トリガー: 毎日 午前9時
4. 操作: `python auto_invest.py`

#### macOS/Linux cron
```bash
# crontabを編集
crontab -e

# 毎日9時に実行
0 9 * * * cd /path/to/AGStock && python auto_invest.py
```

---

## 📊 システムが自動的にやること

### 1. 市場分析 🔍
- 日経225、S&P500、STOXX50 をスキャン
- AIが3つの戦略で分析
  - LightGBM (機械学習)
  - Random Forest
  - コンバインド戦略

### 2. リスク管理 🛡️
- 日次損失が5%を超えたら自動停止
- 市場ボラティリティ(VIX)が高すぎたら待機
- ポジションサイズを自動調整

### 3. 自動売買 💹
- **買い**: AIが良いタイミングと判断した銘柄
- **売り（利確）**: +10%の利益で自動売却
- **売り（損切り）**: -5%の損失で自動損切り

### 4. 通知 📢
LINE または Discord に結果を自動送信（設定した場合）

---

## ⚙️ 設定（オプション）

`config.json` が自動生成されます。必要に応じて編集できます：

```json
{
  "paper_trading": {
    "initial_capital": 1000000,
    "enabled": true
  },
  "auto_trading": {
    "enabled": true,
    "max_daily_trades": 5,
    "risk_per_trade": 0.02
  },
  "notifications": {
    "line": {
      "enabled": false,
      "token": "YOUR_LINE_TOKEN"
    },
    "discord": {
      "enabled": false,
      "webhook_url": ""
    }
  }
}
```

**設定項目の説明:**
- `initial_capital`: 初期資本（円）
- `max_daily_trades`: 1日の最大取引数
- `risk_per_trade`: 1取引あたりのリスク（2%）
- LINE `token`: LINE Notify トークン
- Discord `webhook_url`: Discord Webhook URL

### LINE 通知の設定（オプション）
1. LINE Notify (https://notify-bot.line.me/) にアクセス
2. トークンを発行
3. `config.json` の `token` に貼り付け
4. `enabled` を `true` に

### Discord 通知の設定（オプション）
1. Discord サーバー設定 → 連携サービス → Webhook
2. Webhook URL をコピー
3. `config.json` の `webhook_url` に貼り付け
4. `enabled` を `true` に

---

## 📈 結果の見方

起動後、以下のような情報が表示されます：

```
📈 現在の状況:
   総資産:      ¥1,050,000
   現金:        ¥850,000
   投資額:      ¥200,000
   含み損益:    +¥12,500
   保有銘柄数:  3銘柄

📋 保有銘柄:
   7203.T          100株  +5.2%
   AAPL            50株   +3.1%
   VOW3.DE         30株   -1.8%
```

### 詳細確認
```bash
streamlit run app.py
```
で、ブラウザでインタラクティブな画面が開きます：

- **ホーム**: 総資産・リスク状況
- **パフォーマンス分析**: ベンチマーク比較
- **ペーパートレード**: 取引履歴
- **ダッシュボード**: チャート分析

---

## 🔒 安全機能

### 自動停止条件
システムは以下の場合、自動的に取引を停止します：

1. **日次損失が5%を超えた**
   → 今日はこれ以上取引しない

2. **VIX（恐怖指数）が40以上**
   → 市場が不安定なので待機

3. **現金残高が1万円未満**
   → 資金不足

### 緊急停止
問題が発生した場合：
- 自動的にバックアップを作成
- LINE/Discord に通知
- 取引を全停止

---

## 🆘 トラブルシューティング

### エラーが出る
```bash
pip install -r requirements.txt
```

### データベースエラー
```bash
# 削除して再作成
rm paper_trading.db
python auto_invest.py
```

### Streamlit が起動しない
```bash
# ポート変更
streamlit run app.py --server.port 8502
```

### 通知が来ない
1. `config.json` で `enabled: true` か確認
2. トークン/Webhook URL が正しいか確認
3. インターネット接続を確認

---

## 💡 よくある質問

### Q: リアルマネーで取引される？
**A: いいえ。**デフォルトはペーパートレード（仮想取引）です。

### Q: 本当に利益が出る？
**A: 保証はできません。**過去のバックテストでは良好な結果ですが、未来の利益を保証するものではありません。リスクを理解した上でご利用ください。

### Q: 設定を変えられる？
**A: はい。**`config.json` を編集してください。

### Q: 停止方法は？
**A: Ctrl+C** または、タスクスケジューラーから削除してください。

### Q: いつ実行すればいい？
**A: 毎日 朝9時（市場オープン前）** がおすすめです。

### Q: 何銘柄買う？
**A: 最大5銘柄/日**（設定で変更可能）

---

## 🎓 さらに詳しく

### 使用する戦略
1. **LightGBM**: 機械学習による価格予測
2. **Random Forest**: アンサンブル学習
3. **Combined**: 複数指標の組み合わせ

### リスク管理
- **ポジションサイズ**: 資産の2%/取引
- **分散投資**: 日本・米国・欧州に分散
- **損切り**: -5%で自動実行
- **利確**: +10%で自動実行

---

## 📞 サポート

問題がある場合:
1. `logs/` フォルダのログファイルを確認
2. エラーメッセージをコピー
3. GitHub Issues に報告

---

## ⚖️ 免責事項

- 投資にはリスクが伴います
- 過去の実績は将来の結果を保証しません
- 自己責任で利用してください
- 開発者は損失について一切の責任を負いません

---

## 🚀 今すぐ始める

```bash
python auto_invest.py
```

**それだけです。あとはシステムにおまかせ！** 🎉
