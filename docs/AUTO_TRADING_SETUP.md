# 🤖 フルオート自動取引システム - セットアップガイド

## 何ができる？

**完全自動で株取引を行います！**

- ✅ 毎朝7:00に自動で市場をスキャン
- ✅ AIが有望な銘柄を自動で選定
- ✅ 自動で売買を実行
- ✅ 損切り・利確も自動
- ✅ 結果をレポートで報告

**あなたは何もする必要がありません！**

---

## 🚀 セットアップ（3分）

### ステップ1: 動作確認（1分）

まず、手動で1回実行してみます。

```bash
# ダブルクリックするだけ
run_auto_trader.bat
```

または

```bash
python auto_trader.py
```

**成功すれば「✅ 実行成功」と表示されます。**

---

### ステップ2: 自動実行設定（2分）

#### Windowsタスクスケジューラで設定

1. **Windowsキー + R** を押す
2. `taskschd.msc` と入力してEnter
3. 右側の「タスクの作成」をクリック

#### 全般タブ
- 名前: `AGStock自動取引`
- 説明: `毎朝7:00に自動で株取引を実行`

#### トリガータブ
1. 「新規」をクリック
2. タスクの開始: `スケジュールに従う`
3. 設定: `毎日`
4. 開始: `午前 7:00`
5. OK

#### 操作タブ
1. 「新規」をクリック
2. 操作: `プログラムの開始`
3. プログラム/スクリプト: 
   ```
   C:\gemini-thinkpad\AGStock\run_auto_trader.bat
   ```
4. 開始(オプション):
   ```
   C:\gemini-thinkpad\AGStock
   ```
5. OK

#### 条件タブ
- すべてのチェックを外す（PCがスリープでも実行されるように）

#### 設定タブ
- 「タスクが失敗した場合、次の間隔で再起動する」にチェック
  - 間隔: `1分`
  - 再試行回数: `3`

**「OK」をクリックして完了！**

---

## ✅ 確認方法

### 翌朝7:00以降に確認

```bash
# レポートを見る
notepad reports\auto_trade_最新.txt
```

または

```bash
# ログを見る
notepad logs\auto_trader.log
```

---

## ⚙️ 設定変更

`config.json` を編集して、動作をカスタマイズできます。

```json
{
  "auto_trading": true,          // 自動取引ON/OFF
  "max_positions": 5,             // 最大保有銘柄数
  "position_size": 0.2,           // 1銘柄あたりの資金（20%）
  "min_confidence": 0.7,          // 最低信頼度（70%）
  "risk_level": "medium"          // リスクレベル
}
```

### 設定例

**保守的（安全重視）:**
```json
{
  "max_positions": 3,
  "position_size": 0.15,
  "min_confidence": 0.8,
  "risk_level": "low"
}
```

**積極的（利益重視）:**
```json
{
  "max_positions": 10,
  "position_size": 0.25,
  "min_confidence": 0.6,
  "risk_level": "high"
}
```

---

## 📊 レポートの見方

毎日、`reports` フォルダに自動でレポートが保存されます。

```
reports/
  auto_trade_20251202_070000.txt
  auto_trade_20251203_070000.txt
  ...
```

### レポートの内容

```
🤖 フルオート取引レポート
実行日時: 2025年12月02日 07:00

【資産状況】
総資産: ¥1,050,000
現金:   ¥850,000

【市場スキャン結果】
候補銘柄数: 12件

【実行した取引】
  ✅ 7203.T (トヨタ)
     数量: 50株
     価格: ¥4,000
     信頼度: 85.3%
     戦略: LightGBM Alpha, Combined (RSI + BB)

【ポジション管理】
  💰 6758.T (ソニー) - 利確
     損益: +22.5%
     価格: ¥14,500
```

---

## 🛑 停止方法

### 一時停止
タスクスケジューラで「AGStock自動取引」を右クリック → 「無効化」

### 完全停止
`config.json` を編集:
```json
{
  "auto_trading": false
}
```

---

## ❓ よくある質問

### Q1: 本当に自動で動く？
**A:** はい！設定後は完全自動です。PCの電源が入っていれば、毎朝7:00に自動実行されます。

### Q2: PCを起動しておく必要がある？
**A:** はい。タスクスケジューラはPCが起動している必要があります。
または、24時間稼働のサーバーに設置してください。

### Q3: 本当のお金が動く？
**A:** いいえ！これは「ペーパートレード（練習）」です。
実際のお金を使いたい場合は、証券会社のAPIと連携する必要があります（別途設定が必要）。

### Q4: 失敗したらどうなる？
**A:** タスクスケジューラが自動で3回まで再試行します。
それでも失敗した場合は、ログファイル（`logs/auto_trader.log`）を確認してください。

### Q5: 通知は来る？
**A:** 現在はレポートファイルのみです。
LINEやメール通知が必要な場合は、`config.json` で設定できます（今後実装予定）。

---

## 🎉 完成！

これで、**完全自動の株取引システム**が完成しました！

**あなたがすることは:**
- ✅ 毎日レポートを確認する（5分）
- ✅ 週末に成績を振り返る（30分）

**それだけです！** 😊

---

## 📞 困ったら

### ログを確認
```bash
notepad logs\auto_trader.log
```

### 手動で実行してみる
```bash
python auto_trader.py
```

### 設定をリセット
```bash
python setup_wizard.py
```

---

**Happy Auto Trading! 🚀**
