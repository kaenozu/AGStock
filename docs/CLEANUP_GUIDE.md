# 🧹 システム軽量化ガイド

**所要時間: 10分**  
**効果: ファイル数70%削減、容量75%削減**

---

## 🎯 目的

個人利用に不要なファイルを削除して、システムを軽量化します。

---

## ⚠️ 重要な注意事項

### 必ず実行前に:
1. ✅ バックアップを取る
2. ✅ ドライランで確認
3. ✅ 動作確認

### 削除されるもの:
- 重複ドキュメント (15個)
- テスト出力ファイル (14個)
- 古いスクリプト (20個)
- レビュー・分析ファイル (11個)
- Docker関連ファイル (3個)
- 大きなHTMLファイル (4個、合計14MB)

### 残るもの:
- コアスクリプト (10個)
- 起動スクリプト (5個)
- 必要なドキュメント (10個)
- 設定ファイル (5個)
- データベース (5個)

---

## 🚀 実行手順

### ステップ1: ドライラン (確認のみ)

```bash
python cleanup_system.py --dry-run
```

**出力例:**
```
============================================================
  🧹 システムクリーンアップ
============================================================

⚠️  ドライランモード (実際には削除しません)

📄 ファイル削除:
  [削除予定] COMPLETION_REPORT.md (4,538 bytes)
  [削除予定] DEMO_REPORT.md (3,969 bytes)
  ...

📁 ディレクトリ削除:
  [削除予定] deploy/ (15,234 bytes)
  ...

============================================================
  📊 クリーンアップ完了
============================================================

削除予定:
  ファイル/ディレクトリ数: 67
  解放容量: 18.50 MB
```

### ステップ2: 内容を確認

削除予定のファイルを確認して、問題ないか確認します。

**確認ポイント:**
- 自分で作成したファイルが含まれていないか?
- 必要なファイルが含まれていないか?

### ステップ3: 実行

```bash
python cleanup_system.py
```

**プロンプト:**
```
⚠️  実際に削除します!
続行しますか? (yes/no): yes

📦 バックアップ作成中...
   保存先: ../AGStock_backup_20251202_073831
✅ バックアップ完了

📄 ファイル削除:
  ✅ 削除: COMPLETION_REPORT.md (4,538 bytes)
  ✅ 削除: DEMO_REPORT.md (3,969 bytes)
  ...

📁 ディレクトリ削除:
  ✅ 削除: deploy/ (15,234 bytes)
  ...

============================================================
  📊 クリーンアップ完了
============================================================

削除完了:
  ファイル/ディレクトリ数: 67
  解放容量: 18.50 MB

💾 バックアップ: ../AGStock_backup_20251202_073831

✅ クリーンアップ完了!

次のステップ:
  1. 動作確認: run_unified_dashboard.bat
  2. 問題なければバックアップを削除
```

### ステップ4: 動作確認

```bash
run_unified_dashboard.bat
```

**確認項目:**
- ✅ ダッシュボードが起動するか?
- ✅ すべてのタブが表示されるか?
- ✅ エラーが出ないか?

### ステップ5: バックアップ削除 (任意)

動作確認が完了したら、バックアップを削除できます。

```bash
# Windowsエクスプローラーで削除
# または
rmdir /s /q ..\AGStock_backup_20251202_073831
```

---

## 📊 効果

### Before (削除前)
```
ファイル数: 135個
ディレクトリ: 22個
合計サイズ: 約20MB
```

### After (削除後)
```
ファイル数: 約40個 (-70%)
ディレクトリ: 約10個 (-55%)
合計サイズ: 約5MB (-75%)
```

---

## 🔧 手動削除 (推奨)

自動スクリプトが不安な場合は、手動で削除できます。

### 削除対象リスト

詳細は `CLEANUP_REPORT.md` を参照してください。

**主な削除対象:**
1. 重複ドキュメント (15個)
2. テスト出力ファイル (14個)
3. 古いスクリプト (20個)
4. HTMLファイル (4個、合計14MB)

---

## 💡 よくある質問

### Q: 削除して大丈夫ですか?

**A:** はい、以下の理由で安全です:
- 自動バックアップが作成されます
- 個人利用に不要なファイルのみ削除
- コア機能は残ります

### Q: 間違って削除したら?

**A:** バックアップから復元できます:
```bash
# バックアップフォルダから復元
xcopy /E /I ..\AGStock_backup_20251202_073831 .
```

### Q: ドライランとは?

**A:** 実際には削除せず、削除対象を表示するだけです。
安全に確認できます。

### Q: 削除後にエラーが出たら?

**A:** バックアップから復元してください:
1. 現在のフォルダを削除
2. バックアップをコピー
3. 動作確認

---

## 🎯 推奨アクション

### オプション1: 自動スクリプト (推奨)

```bash
# ステップ1: ドライラン
python cleanup_system.py --dry-run

# ステップ2: 実行
python cleanup_system.py

# ステップ3: 動作確認
run_unified_dashboard.bat
```

**メリット:**
- ✅ 自動バックアップ
- ✅ 一括削除
- ✅ 5分で完了

**デメリット:**
- ❌ 一括削除なので慎重に

### オプション2: 手動削除

```bash
# CLEANUP_REPORT.md を見ながら手動削除
```

**メリット:**
- ✅ 慎重に確認できる
- ✅ 安全

**デメリット:**
- ❌ 時間がかかる (30分)

### オプション3: 何もしない

**メリット:**
- ✅ 安全
- ✅ 手間なし

**デメリット:**
- ❌ ファイルが多いまま
- ❌ 容量を使う

---

## 🎉 完了後

クリーンアップ完了後:

1. ✅ システムが軽量化
2. ✅ 管理しやすくなる
3. ✅ 起動が速くなる
4. ✅ 必要なファイルだけ残る

---

**🧹 それでは、クリーンアップを始めましょう!**

```bash
python cleanup_system.py --dry-run
```

---

*作成日: 2025-12-02*
