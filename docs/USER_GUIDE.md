# AGStock ユーザーガイド

## 📚 目次

1. [はじめに](#はじめに)
2. [システム要件](#システム要件)
3. [インストール](#インストール)
4. [基本的な使い方](#基本的な使い方)
5. [主要機能](#主要機能)
6. [トラブルシューティング](#トラブルシューティング)
7. [FAQ](#faq)

---

## はじめに

AGStockは、AI駆動の高度な株式取引システムです。機械学習、深層学習、そして複数のAIエージェントによる合議制を組み合わせ、最適な投資判断を提供します。

### 主要特徴

- 🤖 **AI投資委員会**: 複数の専門AIエージェントが議論して決定
- 🌌 **量子ハイブリッド最適化**: 量子アニーリングによる少数精鋭ポートフォリオの構築 (Phase 65)
- 👁️ **マルチモーダル感情分析**: 音声・動画・テキストを統合した深層インサイト分析 (Phase 66)
- 🔗 **ブロックチェーン集団知能 (DAO)**: 改ざん不能なレジャーによる複数ノードの意思決定統合 (Phase 67)
- 📊 **高度な分析**: テクニカル、ファンダメンタル、マクロ経済分析
- 🧠 **自己進化**: 過去の取引から学習し、戦略を自動改善
- 🎯 **リスク管理**: 高度なリスク管理とポートフォリオ最適化
- 📚 **永続的記憶**: 全ての決定を記録し、知見を蓄積

---

## システム要件

### 必須要件

- **OS**: Windows 10/11, macOS 10.15+, Linux
- **Python**: 3.9以上
- **メモリ**: 8GB以上推奨
- **ストレージ**: 10GB以上の空き容量

### 推奨要件

- **メモリ**: 16GB以上
- **GPU**: CUDA対応GPU（深層学習の高速化）
- **インターネット**: 安定した接続（市場データ取得用）

---

## インストール

### 1. リポジトリのクローン

```bash
git clone https://github.com/yourusername/AGStock.git
cd AGStock
```

### 2. 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

### 3. 環境変数の設定

`.env`ファイルを作成し、必要なAPIキーを設定:

```env
GEMINI_API_KEY=your_gemini_api_key_here
RAKUTEN_USER_ID=your_rakuten_id  # オプション
RAKUTEN_PASSWORD=your_password    # オプション
```

### 4. システムの起動

```bash
streamlit run app.py
```

ブラウザで `http://localhost:8501` にアクセスしてください。

---

## 基本的な使い方

### ダッシュボードの概要

AGStockのUIは4つの主要タブで構成されています:

1. **🏠 Command Center**: システムの概要とパフォーマンス
2. **🧠 AI Omniscience**: AI分析と意思決定の可視化
3. **⚔️ Operations**: 取引実行とポートフォリオ管理
4. **🧪 Genesis Lab**: 戦略開発と最適化

### 初めての取引

1. **市場スキャン**
   - Command Center → Mission Control
   - 「市場スキャン開始」ボタンをクリック
   - システムが自動的に有望な銘柄を検出

2. **AI委員会の判断を確認**
   - AI Omniscience → Council Hall
   - 各エージェントの意見と最終決定を確認

3. **取引実行**
   - Operations → Trading
   - 推奨された取引を確認し、実行

---

## 主要機能

### 1. AI投資委員会

複数の専門AIエージェントが協議して投資判断を行います:

- **テクニカルアナリスト**: チャート分析とトレンド検出
- **ファンダメンタルアナリスト**: 企業価値分析
- **マクロストラテジスト**: 経済環境分析
- **リスクマネージャー**: リスク評価と管理
- **ポートフォリオマネージャー**: 資産配分最適化

### 2. 自動戦略進化

システムは過去の取引から学習し、新しい戦略を自動生成します:

- 失敗パターンの分析
- 成功要因の抽出
- 新戦略の自動コード生成
- バックテストによる検証

### 3. パラダイム検知

市場環境の変化を自動検知し、戦略を適応させます:

- **GOLDILOCKS**: 最適な成長環境
- **INFLATIONARY_STRESS**: インフレ圧力
- **LIQUIDITY_CRISIS**: 流動性危機
- **STAGNATION**: 停滞期

### 4. 永遠の記録庫

全ての意思決定を完全なコンテキストと共に保存:

- 決定の履歴閲覧
- 普遍的パターンの抽出
- 予測の検証
- 月次・年次レポート生成

---

## トラブルシューティング

### よくある問題と解決方法

#### 1. データ取得エラー

**症状**: 「データの取得に失敗しました」エラー

**解決方法**:
- インターネット接続を確認
- yfinanceのサーバー状態を確認
- 銘柄コードが正しいか確認（例: 7203.T）

#### 2. Gemini API / マルチモーダルエラー

**症状**: 「分析エラーが発生しました」または「APIキーが見つかりません」

**解決方法**:
1. `.env`ファイルに`GOOGLE_API_KEY`が正しく設定されているか確認
2. ファイル形式（MP3, MP4, PDF）がサポートされているか確認
3. 大きすぎるファイルは制限に抵触する可能性があるため注意
4. システムは自動リトライ機能を備えていますが、ネットワーク状態が不安定な場合は再試行してください

#### 3. DAO / ブロックチェーン同期エラー

**症状**: 「シグナルの同期に失敗しました」または「レジャーの整合性が不正です」

**解決方法**:
1. `data/signal_chain.json` が破損していないか確認
2. 他のノードとのネットワーク接続を確認
3. 整合性エラーが出る場合は、バックアップからレジャーを復元

#### 3. メモリ不足

**症状**: システムが遅い、またはクラッシュする

**解決方法**:
- 不要なタブを閉じる
- ブラウザのキャッシュをクリア
- システムを再起動

#### 4. 取引実行エラー

**症状**: 「取引の実行に失敗しました」

**解決方法**:
- 証券口座の認証情報を確認
- 取引時間内か確認
- 十分な資金があるか確認

---

## FAQ

### Q1: AGStockは実際の取引を自動実行しますか？

A: はい、設定により自動取引が可能です。ただし、初期設定ではペーパートレード（仮想取引）モードになっています。実取引を有効にするには、設定で明示的に有効化する必要があります。

### Q2: どの証券会社に対応していますか？

A: 現在、楽天証券APIに対応しています。他の証券会社への対応は今後追加予定です。

### Q3: バックテストはできますか？

A: はい、Genesis Lab → Strategy Lab でバックテストが可能です。過去のデータを使用して戦略の性能を評価できます。

### Q4: 複数の銘柄を同時に監視できますか？

A: はい、ウォッチリストに複数の銘柄を登録し、同時に監視・分析できます。

### Q5: モバイルデバイスから使用できますか？

A: Streamlitベースのため、モバイルブラウザからもアクセス可能ですが、PCでの使用を推奨します。

### Q6: データはどこに保存されますか？

A: 全てのデータは`data/`ディレクトリにローカル保存されます。クラウドへのバックアップも設定可能です。

### Q7: AIの判断を上書きできますか？

A: はい、全ての推奨は最終的にユーザーの承認が必要です。手動で判断を上書きすることも可能です。

### Q8: システムの学習データはリセットできますか？

A: はい、設定から学習データをリセットできます。ただし、蓄積された知見も失われるため注意が必要です。

---

## サポート

問題が解決しない場合は、以下の方法でサポートを受けられます:

- **GitHub Issues**: バグ報告や機能リクエスト
- **ドキュメント**: `docs/`ディレクトリの詳細ドキュメント
- **ログファイル**: `logs/`ディレクトリのエラーログを確認

---

## 次のステップ

- [API仕様書](API_REFERENCE.md)を読む
- [開発者ガイド](DEVELOPER_GUIDE.md)で高度なカスタマイズを学ぶ
- [ベストプラクティス](BEST_PRACTICES.md)で効果的な使い方を学ぶ

---

**最終更新**: 2024年12月29日
**バージョン**: 8.0 (Eternal Consciousness)
