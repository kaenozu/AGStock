# 指標ツールチップ仕様

## 目的
パフォーマンス指標の算出式・適用期間・小数点精度・単位を統一的に管理し、UIツールチップと数値表示が乖離しないようにします。

## 必須フィールド
- `formula`: 指標の算出式や要約。
- `period`: 集計対象期間のラベル（例: `1Y`, `3Y`, `全期間`）。
- `precision`: 小数点以下の桁数。0以上の整数。
- `unit`: `percent` / `ratio` / `absolute` のいずれか。表示時のスケールとサフィックスを決定します。

## 表示ルール
- ツールチップ文言には「式」「期間」「精度」「単位」を含めて表示する。
- `percent` は 100 倍して `%` を付与し、`ratio` はそのまま、`absolute` はスケールせず数値を返す。
- `precision` で丸めた値を返し、数値が `None` の場合は "N/A" を返す。

## 更新ポリシー
- デフォルトメトリクスは CAGR, Sharpe, 最大ドローダウン。新規指標を追加する場合も上記フィールドを必ず設定する。
- フィールドが不足している場合や `unit` が不正な場合は検証で例外を投げる。
- `precision` や `unit` を変更した際はテストで表示の丸め・サフィックスが更新されることを確認する。
